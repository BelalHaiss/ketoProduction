"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{7176:function(e,t,n){n.d(t,{Z:function(){return S}});var i=n(5893),r=n(8790),s=n(3789),a=n(4612),l=n(5054),o=n(1391),u=n(7294),c=n(331),d=n(8873),m=n(6107),f=n(7470);let h=/(?=^\S*$)(?=.{8,})/,x=[{label:"كلمة السر القديمة",re:h,name:"password",errorMessage:"كلمة السر يجب أن تكون أكثر من 8 أحرف ولا تحتوي علي مسافة"},{label:"كلمة السر الجديدة",re:h,name:"newPassword",errorMessage:"كلمة السر يجب أن تكون أكثر من 8 أحرف ولا تحتوي علي مسافة"}],g={password:"",newPassword:""},p={submitActive:!0,submitLoading:!1,loadingText:"جاري تحديث البيانات"};function v(e){let{id:t="",isAdminUpdate:n=!1}=e,[l,o]=(0,u.useState)(g),[c,m]=(0,u.useState)(g),[v,b]=(0,u.useState)("none"),[j,w]=(0,u.useState)(p),[y,S]=(0,u.useState)(!1);function C(){b("none"),w(p),o(g),m(g),S(!1)}function _(e){let{name:t,value:i}=e.target;S(!0),o({...l,[t]:i}),b("flex"),n&&(h.test(i)?m({...c,[t]:"fine"}):m({...c,[t]:""}));let r=x.find(e=>e.name===t);r&&(r.re.test(i)?m({...c,[t]:"fine"}):m({...c,[t]:""}))}return(0,u.useEffect)(()=>n&&c.password?w({...j,submitActive:!0}):n&&!c.password?w({...j,submitActive:!1}):void(c.password&&c.newPassword?w({...j,submitActive:!0}):w({...j,submitActive:!1})),[c]),(0,i.jsxs)(r.kC,{p:"2",flexDir:"column",gap:"3",layerStyle:"flexCenter",children:[(0,i.jsx)(r.xv,{mb:"4",fontSize:"xl",color:"orange.800",fontWeight:"bold",children:"تغيير كلمة السر"}),x.map((e,t)=>{if(!n||1!==t)return(0,i.jsxs)(s.NI,{isInvalid:!!y&&!c[e.name],children:[(0,i.jsxs)(a.BZ,{children:[(0,i.jsx)(a.Ui,{w:"160px",color:"white",bg:"orange.500",children:n?"كلمة السر":e.label}),(0,i.jsx)(a.II,{onChange:_,type:"password",_placeholder:{color:"gray.300"},variant:"outline",errorBorderColor:"crimson",name:e.name,focusBorderColor:"orange.500",value:l[e.name]})]}),(0,i.jsxs)(s.J1,{children:[" ",e.errorMessage," "]})]},t)}),(0,i.jsx)(d.Z,{display:v,onReset:C,onSubmit:function(){(0,f.Cp)(l,t,n),C()},submitButton:j})]})}var b=n(830);function j(e){let{isOpen:t,onClose:n,onSubmit:r,title:s,text:a}=e,o=u.useRef(null);return(0,i.jsx)(b.aR,{isOpen:t,leastDestructiveRef:o,onClose:n,children:(0,i.jsx)(b.dh,{children:(0,i.jsxs)(b._T,{children:[(0,i.jsx)(b.fY,{fontSize:"lg",fontWeight:"bold",children:s}),(0,i.jsx)(b.iP,{children:a}),(0,i.jsxs)(b.xo,{children:[(0,i.jsx)(l.zx,{ref:o,onClick:n,children:"الغاء"}),(0,i.jsx)(l.zx,{colorScheme:"red",onClick:r,mr:3,children:"تاكيد"})]})]})})})}let w={submitActive:!0,submitLoading:!1,loadingText:"جاري تحديث البيانات"},y=[{label:"الاسم",name:"name",type:"text",errorMessage:"لا يمكن ترك الاسم فارغا"},{label:"اسم العائلة",name:"lastName",type:"text",errorMessage:"لا يمكن ترك الاسم فارغا"},{label:"البريد الالكتروني ",name:"email",re:/^([a-zA-Z0-9_\-?\.?]+)@([a-zA-Z]){3,}\.([a-zA-Z]){2,5}$/,errorMessage:"البريد الالكتروني غير صحيح",type:"text"},{label:"رقم الهاتف",name:"phone",type:"number"}];var S=function(e){let{user:t,isAdminUpdate:n=!1}=e,f=(0,c.oR)(e=>e.setUser),h=(0,c.oR)(e=>e.prices),x=(0,c.oR)(e=>e.user),[g,p]=(0,u.useState)(t.profile),[b,S]=(0,u.useState)(t.profile),[C,_]=(0,u.useState)(!1),[k,A]=(0,u.useState)(""),[I,B]=(0,u.useState)("none"),[z,T]=(0,u.useState)(w),[Z,W]=(0,u.useState)(!1),R=()=>W(!0),D=()=>W(!1);function E(e,t){""===t?S({...b,[e]:""}):S({...b,[e]:"fine"})}async function L(){let e=h.find(e=>e._id===k),n={userId:t._id,priceId:null==e?void 0:e._id,category:null==e?void 0:e.category};return(0,m._)({url:"/subscriptions/free",data:n,method:"post",successToast:"تم الاضافه بنجاح"}),N()}async function M(){T(e=>({...e,submitLoading:!0})),g.password&&delete g.password;let e={method:"patch",data:g,successToast:"تم تحديث البيانات بنجاح",errorToast:"تم ادخال بيانات خاطئة"};if(n)return(0,m._)({url:"/admin/account/"+t._id+"?path=admin",...e}),N();let i=await (0,m._)({url:"/users/account/"+t._id,...e});i&&f(i),N()}function N(){_(!1),B("none"),T(w)}function P(e){let{name:t,value:n}=e.target;p({...g,[t]:n}),_(!0);let i=y.find(e=>e.name===t);i&&(i.re?i.re.test(n)?E(t,"fine"):E(t,""):n?E(t,"fine"):E(t,""))}async function U(){await (0,m._)({url:"/admin/user/".concat(t._id),method:"delete",successToast:"تم حذف الشخص"}),D()}return(0,u.useEffect)(()=>{for(let e in b){if(""===b[e]||0===b[e]){T(e=>({...e,submitActive:!1}));break}T(e=>({...e,submitActive:!0})),B("flex")}},[b]),(0,u.useEffect)(()=>{p(t.profile),S(t.profile)},[t]),(0,i.jsxs)(r.kC,{sx:{"div > div":{right:"unset",left:"10px"}},maxW:"700px",mx:"auto",gap:"3",flexDir:"column",children:[y.map((e,n)=>t.role&&"phone"===e.name?null:(0,i.jsxs)(s.NI,{isInvalid:""===b[e.name],children:[(0,i.jsxs)(a.BZ,{children:[(0,i.jsx)(a.Ui,{w:{base:"120px",md:"160px"},bg:"orange.500",color:"white",children:e.label}),(0,i.jsx)(a.II,{onChange:P,type:e.type,_placeholder:{color:"gray.300"},variant:"outline",errorBorderColor:"crimson",name:e.name,focusBorderColor:"orange.500",value:g[e.name]})]}),(0,i.jsxs)(s.J1,{children:[" ",e.errorMessage," "]})]},n)),(0,i.jsx)(d.Z,{onReset:function(){(null==x?void 0:x.role)?p(t.profile):p(null==x?void 0:x.profile),S(t.profile),B("none"),_(!1),T(w)},onSubmit:M,display:I&&C?"flex":"none",submitButton:z}),(0,i.jsx)(v,{isAdminUpdate:n,id:t._id}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.zx,{onClick:R,colorScheme:"red",children:[" ","حذف المستخدم"]}),(0,i.jsx)(o.Ph,{variant:"filled",onChange:e=>A(e.target.value),placeholder:"اضف اشتراك مجاني",children:h.map(e=>(0,i.jsx)("option",{value:e._id,children:e.label},e._id))}),k&&(0,i.jsxs)(l.zx,{colorScheme:"green",onClick:L,children:[" ","اضف الاشتراك"," "]}),(0,i.jsx)(j,{onClose:D,onSubmit:U,title:"حذف ".concat(t.profile.name," نهائيا"),isOpen:Z,text:"هل انت متاكد من حذف الشخص"})]})]})}},2946:function(e,t,n){n.d(t,{Z:function(){return p}});var i,r=n(5893),s=n(8790),a=n(3789),l=n(1391),o=n(4612),u=n(7294),c=n(331),d=n(8873),m=n(1018),f=n(6107);let h={submitActive:!0,submitLoading:!1,loadingText:"جاري تحديث البيانات"},x=[{label:"  لا يوجد نشاط",value:"sedentary"},{label:"  نشاط خفيف (ا - 3 يوم/ اسبوع)",value:"light"},{label:"  نشاط متوسط (3 - 5 يوم/ اسبوع)",value:"moderate"},{label:"  نشيط (6 - 7 يوم/ اسبوع)",value:"active"}],g=[{label:"اريد انقاص وزني",value:"min"},{label:"اريد إنقاص اكبر وزن ممكن",value:"max"}];var p=(i=function(e){let{user:t,isAdminUpdate:n,shouldRender:i}=e,p=(0,c.oR)(e=>e.setUser),[v,b]=(0,u.useState)(t.measurements),[j,w]=(0,u.useState)(t.measurements),[y,S]=(0,u.useState)(t.physicalActivity),[C,_]=(0,u.useState)(t.willing);(0,u.useEffect)(()=>{w(t.measurements),b(t.measurements),S(t.physicalActivity),_(t.willing)},[t]);let[k,A]=(0,u.useState)(""),[I,B]=(0,u.useState)(!1),[z,T]=(0,u.useState)("none"),[Z,W]=(0,u.useState)(h);function R(e,t){""===t?b({...v,[e]:""}):b({...v,[e]:"fine"})}async function D(){W(e=>({...e,submitLoading:!0}));let e={method:"patch",data:{measurements:j.desiredWeight===t.measurements.desiredWeight&&j.weight===t.measurements.weight?j:{...j,weightUpdateDate:new Date},physicalActivity:y,willing:C},successToast:"تم تحديث البيانات بنجاح",errorToast:"حدث خطا برجاء المحاولة لاحقا"};if(n){(0,f._)({url:"/admin//measure/"+t._id+"?path=admin",...e}),E();return}let i=await (0,f._)({url:"/users/measure/"+t._id,...e});i&&p(i),E()}function E(){B(!1),T("none"),W(h)}function L(e){let{name:t,value:n}=e.target;w(e=>({...e,[t]:+n})),B(!0);let i=m.Ol.find(e=>e.name===t);i&&(+n>=i.min&&+n<=i.max?(R(t,"fine"),"weight"===t&&A("fine")):(R(t,""),"weight"===t&&A(""))),("desiredWeight"===t||"weight"===t)&&function(e,t){if("weight"===e){t>=j.desiredWeight&&j.desiredWeight>=40?R("desiredWeight","fine"):R("desiredWeight","");return}"desiredWeight"===e&&(t<=j.weight&&t>=40?R(e,"fine"):R(e,""))}(t,+n)}return(0,u.useEffect)(()=>{for(let e in v){if(""===v[e]||0===v[e]){W(e=>({...e,submitActive:!1}));break}W(e=>({...e,submitActive:!0})),T("flex")}},[v]),(0,u.useEffect)(()=>{"fine"===k||v.weight?R("weight","fine"):R("weight","")},[k]),(0,r.jsxs)(s.kC,{sx:{"div > div":{right:"unset",left:"10px"}},maxW:"700px",mx:"auto",gap:"3",flexDir:"column",children:[!n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.NI,{children:[(0,r.jsx)(a.lX,{fontSize:"xl",htmlFor:"activity",children:"مدى نشاطك البدني اليومي"}),(0,r.jsx)(l.Ph,{id:"activity",bg:"orange.200",color:"gray.800",value:y,onChange:function(e){e.target.value&&(B(!0),S(e.target.value))},children:x.map(e=>{let{label:t,value:n}=e;return(0,r.jsx)("option",{style:{backgroundColor:y===n?"DodgerBlue":""},value:n,children:t},n)})})]}),(0,r.jsxs)(a.NI,{children:[(0,r.jsx)(a.lX,{fontSize:"xl",htmlFor:"activity",children:"مدى إستعدادك لأنقاص الوزن"}),(0,r.jsx)(l.Ph,{id:"activity",bg:"orange.200",color:"gray.800",value:C,onChange:function(e){e.target.value&&(B(!0),_(e.target.value))},children:g.map(e=>{let{label:t,value:n}=e;return(0,r.jsx)("option",{style:{backgroundColor:C===n?"DodgerBlue":""},value:n,children:t},n)})})]})]}),m.Ol.map((e,t)=>(0,r.jsxs)(a.NI,{isInvalid:""===v[e.name],children:[(0,r.jsxs)(o.BZ,{children:[(0,r.jsx)(o.Ui,{w:"160px",bg:"orange.500",color:"white",children:e.value}),(0,r.jsx)(o.II,{onChange:L,type:"number",_placeholder:{color:"gray.300"},variant:"outline",errorBorderColor:"crimson",name:e.name,focusBorderColor:"orange.500",value:0===j[e.name]?"":j[e.name],placeholder:e.label})]}),(0,r.jsxs)(a.J1,{children:[" ",e.errorMessage," "]})]},t)),(0,r.jsx)(d.Z,{onReset:function(){b(t.measurements),w(t.measurements),S(t.physicalActivity),A(""),T("none"),B(!1),W(h)},onSubmit:D,display:z&&I?"flex":"none",submitButton:Z})]})},function(e){let[t,n]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{e.shouldRender?n(!0):n(!1)},[e]),t?(0,r.jsx)(i,{...e}):(0,r.jsx)(r.Fragment,{children:" "})})},8873:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(5893),r=n(8790),s=n(5054);function a(e){let{onReset:t=()=>{},onSubmit:n=()=>{},display:a="none",submitButton:l={submitActive:!1,submitLoading:!1,loadingText:"جاري تحديث البيانات"}}=e;return(0,i.jsxs)(r.kC,{display:a,my:"2",align:"center",w:"100%",justify:"space-around",children:[(0,i.jsx)(s.zx,{w:{base:"120px",md:"200px"},colorScheme:"yellow",onClick:t,children:"الغاء التعديلات"}),(0,i.jsx)(s.zx,{isLoading:l.submitLoading,loadingText:l.loadingText,disabled:!l.submitActive,w:{base:"120px",md:"200px"},colorScheme:"green",onClick:n,children:"حفظ التعديلات"})]})}},4781:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(5893),r=n(8790),s=n(9609);function a(e){let{text:t}=e;return(0,i.jsxs)(r.kC,{p:"3",flex:"1",justifyContent:"center",flexDir:"column",alignItems:"center",children:[(0,i.jsx)(s.$,{transform:"translate(-50%, -50%)",thickness:"7px",speed:"0.65s",w:"8rem",h:"8rem",emptyColor:"orange.200",color:"orange.700"}),t&&(0,i.jsx)(r.xv,{children:t})]})}}}]);