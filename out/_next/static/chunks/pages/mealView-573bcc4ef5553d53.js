(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{2125:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mealView",function(){return n(7141)}])},7141:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var l=n(5893),o=n(8790),s=n(8428),i=n(5054),a=n(7294),r=n(6107),c=n(2496),u=n(331),d=n(894),m=n(9583);function x(e){let{title:t,texts:n,isValues:s}=e;return(0,l.jsxs)(o.kC,{flexDir:"column",align:"center",p:"2",bg:"orange.200",rounded:"xl",w:"250px",minH:"350px",children:[(0,l.jsx)(o.xv,{fontSize:"2xl",mt:"2",mb:"3",fontWeight:"bold",children:t}),(0,l.jsx)(o.kC,{flexDir:"column",mt:s?7:0,w:"100%",px:"1",gap:"2",children:n.map((e,t)=>(0,l.jsxs)(o.kC,{align:"center",gap:"1",children:[(0,l.jsx)(d.JO,{as:m.gbA,w:"2",color:"orange.800"}),(0,l.jsx)(o.xv,{fontSize:s?"lg":"md",fontWeight:"semibold",children:e})]},t))})]})}var f=n(9727),p=n(1163);let g=()=>new Date().toLocaleDateString("en");function h(){let e=(0,u.oR)(e=>e.mealView),t=(0,u.oR)(e=>e.user),[n,d]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null==t||!t.role),_=(0,p.useRouter)();async function b(){d(!0);let n=await (0,r._)({url:"/users/addmeal/"+t._id,method:"post",data:{mealId:e._id,date:g(),time:_.query.time?e.time:e.time.value},successToast:"تم اضافه الوجبه بنجاح",errorToast:"حدث خطا برجاء المحاولة لاحقا"});d(!1),n&&h(!0)}async function v(){d(!0);let n=await (0,r._)({url:"/users/deletemeal/"+t._id,method:"delete",data:{mealId:e._id,date:g(),time:_.query.time?e.time:e.time.value},successToast:"تم الحذف بنجاح",errorToast:"حدث خطا برجاء المحاولة لاحقا"});d(!1),n&&h(!1)}return(0,c.r)(w?{url:"/users/ismealadded/".concat(null==t?void 0:t._id,"?queryDate=").concat(g(),"&mealId=").concat(null==e?void 0:e._id,"&time=").concat(_.query.time?_.query.time:null==e?void 0:e.time.value)}:null,null,{onRequest:()=>j(!1),onSuccess(e){(null==e?void 0:e.message)==="added"?h(!0):h(!1)}}),(0,a.useEffect)(()=>{window.handleSnap("PAGE_VIEW")},[]),(0,l.jsxs)(o.kC,{flexDir:"column",color:"orange.800",layerStyle:"flexCenter",position:"relative",p:"2",gap:"2",children:[(0,l.jsx)(f.x,{path:(null==t?void 0:t.role)?"/admin/meals":"meals"}),e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Ee,{mt:{base:"8",md:"1"},src:e.image.url?e.image.url:"https://res.cloudinary.com/ketoar/image/upload/v1/".concat(e.image),rounded:"3xl",alt:"meal",w:{base:"60%",md:"40%"}}),(0,l.jsxs)(o.kC,{align:"center",flexDir:"column",children:[(0,l.jsx)(o.xv,{fontSize:{base:"lg",md:"3xl"},fontWeight:"bold",children:e.name}),(0,l.jsxs)(o.xv,{fontSize:{base:"sm",md:"md"},fontWeight:"",children:["مدة تحضير الوجبة ",e.duration," دقائق"]})]}),(0,l.jsxs)(o.kC,{justify:"space-around",flexDir:{base:"column",md:"row"},w:"100%",gap:"3",align:"center",children:[(0,l.jsx)(x,{isValues:!0,title:"القيم الغذائيه",texts:[" السعرات الحرارية: ".concat(e.calories," س"),"الكاربوهيدرات: ".concat(e.carbs," غم"),"البروتين: ".concat(e.proteins," غم"),"الدهون: ".concat(e.fats," غم")]}),(0,l.jsx)(x,{isValues:!1,title:"المقادير",texts:e.components})]}),(0,l.jsxs)(o.kC,{flexDir:"column",my:"4",w:"80%",mx:"auto",gap:"2",children:[(0,l.jsx)(o.xv,{fontSize:{base:"lg",md:"3xl"},fontWeight:"bold",children:"طريقة التحضير"}),(0,l.jsx)(o.xv,{children:e.steps})]}),!(null==t?void 0:t.role)&&(0,l.jsx)(i.zx,{onClick:m?v:b,colorScheme:m?"red":"orange",w:"70%",loadingText:m?"جاري الحذف":"جاري الاضافة",isLoading:n,mx:"auto",children:m?"حذف":"اضف الوجبة الي القائمة"})]})]})}},2496:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var l=n(7294),o=n(6107);function s(e,t,n){let[s,i]=(0,l.useState)(!1),a=(0,l.useRef)(!0);async function r(e,t){let l=await (0,o._)({...e});l&&a.current&&(n&&n.onSuccess&&n.onSuccess(l),t&&t(l),i(!0))}return(0,l.useEffect)(()=>(a.current=!0,e?(r(e,t),n&&n.onRequest&&n.onRequest()):i(!1),()=>{a.current=!1}),[e]),{data:s}}},9727:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var l=n(5893),o=n(5054),s=n(1163),i=n(155);function a(e){let{path:t,client:n,onClick:a}=e,r=(0,s.useRouter)();return(0,l.jsx)(o.zx,{onClick:()=>a?a():r.replace(t),position:"absolute",dir:"ltr",size:{base:"sm",md:"md"},width:{base:"100px",md:"120px"},leftIcon:(0,l.jsx)(i.Eg1,{fontSize:"25px"}),top:{base:n?"120px":"-1",md:n?"100px":"30px"},left:{base:"12px",md:"15px"},colorScheme:"yellow",color:"yellow.800",children:"رجوع"})}}},function(e){e.O(0,[445,260,774,888,179],function(){return e(e.s=2125)}),_N_E=e.O()}]);