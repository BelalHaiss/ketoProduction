(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[364],{3441:function(e,n,l){"use strict";l.d(n,{g:function(){return c}});var t=l(3789),r=l(2846),a=l(5031),o=l(7294);function s(){return(s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e}).apply(this,arguments)}var i=["className","rows"],u=["h","minH","height","minHeight"],c=(0,r.Gp)(function(e,n){var l=(0,r.mq)("Textarea",e),c=(0,r.Lr)(e),x=c.className,d=c.rows,m=function(e,n){if(null==e)return{};var l,t,r={},a=Object.keys(e);for(t=0;t<a.length;t++)l=a[t],n.indexOf(l)>=0||(r[l]=e[l]);return r}(c,i),f=(0,t.Yp)(m),h=d?(0,a.CE)(l,u):l;return o.createElement(r.m$.textarea,s({ref:n,rows:d},f,{className:(0,a.cx)("chakra-textarea",x),__css:h}))});a.Ts&&(c.displayName="Textarea")},1058:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/permissions",function(){return l(5563)}])},5563:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return j}});var t=l(5893),r=l(8790),a=l(5054),o=l(7294),s=l(9727),i=l(830),u=l(252),c=l(7470);let x={name:"",lastName:"",email:"",password:"",role:""},d=[{name:"name",label:"الاسم",type:"text",value:""},{name:"lastName",label:"اسم العائلة",type:"text",value:""},{name:"email",label:"البريد الالكتروني",type:"text",value:""},{name:"password",label:"كلمة السر",type:"text",value:""},{name:"role",label:"الصلاحية",type:"select",value:"",options:[{value:"admin",label:"مدير"},{value:"meals",label:"مدخل وجبات"},{value:"workouts",label:"اخصائي رياضي"},{value:"subscriptions",label:"اخصائي تغذية"}]}];function m(e){let{isOpen:n,onClose:l}=e,[r,s]=(0,o.useState)(x);function m(e,n){s({...r,[e]:n})}return(0,o.useEffect)(()=>()=>l(),[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(i.u_,{isOpen:n,onClose:l,children:[(0,t.jsx)(i.ZA,{}),(0,t.jsxs)(i.hz,{children:[(0,t.jsx)(i.xB,{textAlign:"center",children:"اضف موظف"}),(0,t.jsx)(i.ol,{}),(0,t.jsx)(i.fe,{children:d.map((e,n)=>(0,t.jsx)(u.J,{onChange:m,...e,value:r[e.name]},n))}),(0,t.jsxs)(i.mz,{justifyContent:"space-around",children:[(0,t.jsxs)(a.zx,{colorScheme:"red",mr:3,onClick:l,children:["الغاء"," "]}),(0,t.jsx)(a.zx,{colorScheme:"green",onClick:()=>(0,c.Hd)(r,l),children:"حفظ البيانات"})]})]})]})})}var f=l(3252),h=l(5832);let p={label:"اختر الموظف",name:"agents",options:[],value:"",type:"select"},v={name:"role",label:"الصلاحية",type:"select",value:"",options:[{value:"admin",label:"مدير"},{value:"meals",label:"مدخل وجبات"},{value:"workouts",label:"اخصائي رياضي"},{value:"subscriptions",label:"اخصائي تغذية"}]};var j=(0,f.Z)(function(){var e;let[n,l]=(0,o.useState)(!1),i=()=>l(!1),x=()=>l(!0),[d,f]=(0,o.useState)([]),[j,g]=(0,o.useState)(null),[b,C]=(0,o.useState)(""),[y,w]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{(0,c.j8)(f)},[]),(0,t.jsxs)(r.kC,{position:"relative",layerStyle:"flexCenter",flexDir:"column",p:"3",children:[(0,t.jsx)(s.x,{path:"/admin"}),(0,t.jsx)(r.xv,{fontSize:"3xl",fontWeight:"bolder",children:"صلاحيات ادارية"}),(0,t.jsx)(a.zx,{my:"4",w:"70%",mx:"auto",onClick:x,colorScheme:"green",children:"اضف موظف"}),(0,t.jsx)(m,{onClose:i,isOpen:n}),(0,t.jsxs)(r.kC,{flexDir:"column",gap:"4",my:"5",children:[(0,t.jsxs)(r.kC,{gap:"3",fontSize:"3xl",fontWeight:"bold",align:"center",children:[(0,t.jsx)(r.xv,{children:"عدد الموظفين "}),(0,t.jsx)(r.xv,{color:"orange.800",children:d.length})]}),(0,t.jsx)(u.J,{...p,options:d.map(e=>({label:e.profile.name+" "+e.profile.lastName,value:e._id})),value:null!==(e=null==j?void 0:j._id)&&void 0!==e?e:"",onChange:function(e,n){var l;let t=d.find(e=>e._id===n);g(t),C(null!==(l=null==t?void 0:t.role)&&void 0!==l?l:"")}}),j&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.J,{...v,value:b,onChange:function(e,n){C(n),w(!0)}}),(0,t.jsx)(a.zx,{colorScheme:"red",onClick(){(0,h.Z)("جاري الحذف","warning"),(0,c.$y)(j._id)},children:"حذف الموظف"})]}),y&&(0,t.jsx)(r.kC,{w:"100%",justify:"space-around",children:(0,t.jsx)(a.zx,{onClick(){var e;(0,c.$i)({userId:null!==(e=null==j?void 0:j._id)&&void 0!==e?e:"",role:b}),w(!1)},colorScheme:"green",children:"حفظ التغييرات"})})]})]})},"admin")},3252:function(e,n,l){"use strict";l.d(n,{Z:function(){return i}});var t=l(5893),r=l(1163),a=l(7294),o=l(6107),s=l(4781);function i(e,n){let l=()=>{let l=(0,r.useRouter)(),[i,u]=(0,a.useState)(null),c=async()=>{let e=await (0,o._)({url:"/admin/validate?path="+n});e?u(e):l.push("/")};return(0,a.useEffect)(()=>{c()},[]),i?(0,t.jsx)(e,{}):(0,t.jsx)(s.Z,{})};return l}},9727:function(e,n,l){"use strict";l.d(n,{x:function(){return s}});var t=l(5893),r=l(5054),a=l(1163),o=l(155);function s(e){let{path:n,client:l,onClick:s}=e,i=(0,a.useRouter)();return(0,t.jsx)(r.zx,{onClick:()=>s?s():i.replace(n),position:"absolute",dir:"ltr",size:{base:"sm",md:"md"},width:{base:"100px",md:"120px"},leftIcon:(0,t.jsx)(o.Eg1,{fontSize:"25px"}),top:{base:l?"120px":"-1",md:l?"100px":"30px"},left:{base:"12px",md:"15px"},colorScheme:"yellow",color:"yellow.800",children:"رجوع"})}},252:function(e,n,l){"use strict";l.d(n,{J:function(){return u}});var t=l(5893),r=l(3789),a=l(4612),o=l(8790),s=l(1391),i=l(3441);function u(e){let{type:n,value:l,name:u,label:c,onChange:x,width:d,options:m,readOnly:f=!1}=e;return(0,t.jsxs)(r.NI,{maxW:d||"500px",children:[(0,t.jsx)(r.lX,{htmlFor:u,children:c}),("text"===n||"number"===n||"array"===n)&&(0,t.jsx)(a.II,{color:"orange.500",readOnly:"image"===u||f,id:u,focusBorderColor:"orange.500",type:n,name:u,value:"object"==typeof l?l.join(","):l,onChange:e=>x(u,e.target.value)}),"select"===n&&(0,t.jsx)(o.kC,{sx:{"div > div":{left:"10px",right:"unset"}},children:(0,t.jsx)(s.Ph,{id:u,value:l,onChange:e=>x(u,e.target.value),name:u,placeholder:c,children:null==m?void 0:m.map((e,n)=>(0,t.jsx)("option",{value:e.value,children:e.label},n))})}),"textarea"===n&&(0,t.jsx)(i.g,{color:"orange.500",id:u,focusBorderColor:"orange.500",name:u,value:l,onChange:e=>x(u,e.target.value)})]})}},4781:function(e,n,l){"use strict";l.d(n,{Z:function(){return o}});var t=l(5893),r=l(8790),a=l(9609);function o(e){let{text:n}=e;return(0,t.jsxs)(r.kC,{p:"3",flex:"1",justifyContent:"center",flexDir:"column",alignItems:"center",children:[(0,t.jsx)(a.$,{transform:"translate(-50%, -50%)",thickness:"7px",speed:"0.65s",w:"8rem",h:"8rem",emptyColor:"orange.200",color:"orange.700"}),n&&(0,t.jsx)(r.xv,{children:n})]})}}},function(e){e.O(0,[260,774,888,179],function(){return e(e.s=1058)}),_N_E=e.O()}]);