(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{7265:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/passwordreset",function(){return n(7856)}])},7856:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return p}});var t=n(5893),o=n(8790),r=n(3789),i=n(4612),a=n(1163),c=n(7294),u=n(6107),d=n(8873),l=n(5832);let f=/(?=^\S*$)(?=.{8,})/;function p(){let e=(0,a.useRouter)(),{id:s,token:n,init:p="1"}=e.query,w=Math.floor((Date.now()-+p)/1e3/60);(0,c.useEffect)(()=>{let t="";Object.keys(e.query).length&&(s&&n||(e.replace("/"),t="true"),w>59&&(e.replace("/"),t="true"),"true"===t&&(0,l.Z)("هذا الرابط غير صالح للاستخدام"))},[e]);let[x,m]=(0,c.useState)("none"),h={submitActive:!0,submitLoading:!1,loadingText:"جاري تحديث البيانات"},[g,b]=(0,c.useState)(h),[j,_]=(0,c.useState)({password:"",confirmPassword:""});function y(){return!!(j.password===j.confirmPassword&&f.test(j.confirmPassword))}async function v(e){let{name:s,value:n}=e.target;_({...j,[s]:n})}async function S(){if(!y())return(0,l.Z)("تاكد من صحة كلمة المرور");await (0,u._)({url:"/users/updatepassword",method:"patch",data:{userId:s,token:n,password:j.password},successToast:"تم تغير كلمة السر بنجاح"}),e.replace("/")}return(0,c.useEffect)(()=>{y()?(m("flex"),b(h)):(m("flex"),b({...h,submitActive:!1}))},[j]),(0,c.useEffect)(()=>{window.handleSnap("PAGE_VIEW")},[]),(0,t.jsxs)(o.kC,{p:"5",align:"center",gap:"5",maxW:"600px",mx:"auto",flexDir:"column",children:[(0,t.jsx)(o.xv,{my:"5",fontWeight:"bold",fontSize:"xl",children:"ادخل كلمة السر الجديدة"}),(0,t.jsxs)(r.NI,{isInvalid:!f.test(j.password),color:"orange.900",children:[(0,t.jsx)(r.lX,{fontSize:"lg",htmlFor:"password",children:"كلمة السر"}),(0,t.jsx)(i.II,{id:"password",type:"password",value:j.password,name:"password",onChange:v,bg:"white"}),(0,t.jsx)(r.J1,{children:" كلمة السر لا تقل عن 8 حروف"})]}),(0,t.jsxs)(r.NI,{isInvalid:!y(),color:"orange.900",children:[(0,t.jsxs)(r.lX,{fontSize:"lg",htmlFor:"confirm",children:["تاكيد كلمة السر"," "]}),(0,t.jsx)(i.II,{id:"confirm",type:"password",value:j.confirmPassword,name:"confirmPassword",onChange:v,bg:"white"}),(0,t.jsxs)(r.J1,{children:[" ","تاكد من ان كلمة السر متماثلة ولاتقل عن 8 حروف"]})]}),(0,t.jsx)(d.Z,{onReset:function(){m("none"),b(h),_({password:"",confirmPassword:""})},onSubmit:S,display:x,submitButton:g})]})}},8873:function(e,s,n){"use strict";n.d(s,{Z:function(){return i}});var t=n(5893),o=n(8790),r=n(5054);function i(e){let{onReset:s=()=>{},onSubmit:n=()=>{},display:i="none",submitButton:a={submitActive:!1,submitLoading:!1,loadingText:"جاري تحديث البيانات"}}=e;return(0,t.jsxs)(o.kC,{display:i,my:"2",align:"center",w:"100%",justify:"space-around",children:[(0,t.jsx)(r.zx,{w:{base:"120px",md:"200px"},colorScheme:"yellow",onClick:s,children:"الغاء التعديلات"}),(0,t.jsx)(r.zx,{isLoading:a.submitLoading,loadingText:a.loadingText,disabled:!a.submitActive,w:{base:"120px",md:"200px"},colorScheme:"green",onClick:n,children:"حفظ التعديلات"})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7265)}),_N_E=e.O()}]);