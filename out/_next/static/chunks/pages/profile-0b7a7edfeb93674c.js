(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{6896:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(7313)}])},7313:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var s,r=t(5893),i=t(3957),l=t(7294),u=t(331),c=t(1163),o=t(4781),a=t(7176),d=t(8790),x=t(2496);function f(){let[e,n]=(0,l.useState)(!0),[t,s]=(0,l.useState)(!1),[i,c]=(0,l.useState)([]),a=(0,u.oR)(e=>e.user);return(0,x.r)(t?null:{url:"/payments/user/"+a._id},c,{onRequest:()=>s(!0),onSuccess(e){n(!1)}}),(0,r.jsxs)(d.kC,{flexDir:"column",gap:"3",bg:"orange.200",borderRadius:"lg",w:"100%",p:"2",children:[e&&(0,r.jsx)(o.Z,{}),!e&&0===i.length&&(0,r.jsx)(d.xv,{fontWeight:"bold",textAlign:"center",children:"لا يوجد اي مدفوعات"}),!e&&i.length>0&&i.map((e,n)=>(0,r.jsx)(h,{payment:e},n))]})}function h(e){let{payment:n}=e;return(0,r.jsxs)(d.kC,{bg:"white",p:"2",px:"3",borderRadius:"xl",boxShadow:"xl",justify:"space-between",w:"100%",align:"center",children:[(0,r.jsxs)(d.kC,{flexDir:"column",gap:"2",align:"center",children:[(0,r.jsxs)(d.kC,{gap:"2",align:"center",children:[(0,r.jsxs)(d.xv,{fontSize:{base:"md",md:"lg"},fontWeight:"bold",children:[" ",n.paid," ريال"]}),(0,r.jsxs)(d.Ct,{p:{base:"1",md:"2"},fontSize:{base:"md",md:"lg"},borderRadius:"full",colorScheme:"success"===n.status?"green":"red",children:[" ","success"===n.status?"عملية ناجحة":"عملية فشلت"]})]}),(0,r.jsx)(d.xv,{children:new Date(n.createdAt).toLocaleDateString("ar",{dateStyle:"full"})})]}),(0,r.jsx)(d.Ct,{fontSize:{base:"md",md:"lg"},p:{base:"2",md:"5"},borderRadius:"full",colorScheme:"purple",children:function(e){switch(e){case"meal":return"باقة وجبات الكيتو";case"workout":return"باقة التمارين ";case"nutritionist":return"باقة اخصائي التغئية"}}(n.category)})]})}var g=t(5054),m=t(1018),b=t(8873),j=t(6107);let p={submitActive:!0,submitLoading:!1,loadingText:"جاري تحديث البيانات"};function w(){let e=(0,u.oR)(e=>e.user),n=(0,u.oR)(e=>e.setUser),[t,s]=(0,l.useState)(e.categories),[i,c]=(0,l.useState)(!1),[o,a]=(0,l.useState)(p);function x(e){let n=t.find(n=>n===e);[...t],n?s(t.filter(n=>n!==e)):s([...t,e]),c(!0)}function f(n){n||s(e.categories),c(!1),a(p)}async function h(){a({...o,submitLoading:!0});let s=await (0,j._)({url:"/users/meats/".concat(e._id),method:"post",data:t,successToast:"تم تحديث البيانات بنجاح"});s&&n(s),f(!0)}return(0,r.jsxs)(d.kC,{flexDir:"column",w:{base:"90%",md:"60%"},mx:"auto",bg:"orange.200",p:"5",boxShadow:"lg",borderRadius:"lg",align:"center",children:[(0,r.jsx)(d.xv,{fontSize:{base:"lg",md:"xl"},fontWeight:"bold",children:"اختر أنواع اللحوم اللتي تفضلها"}),(0,r.jsxs)(d.kC,{w:"100%",my:"2",flexDir:{base:"column",md:"row"},align:"center",gap:"3",justify:"space-between",children:[(0,r.jsx)(d.kC,{align:"center",flexDir:"column",gap:"2",children:m.Lp.map((e,n)=>{if(!(n>=3))return(0,r.jsx)(g.zx,{w:"150px",onClick:()=>x(e.value),leftIcon:e.icon,colorScheme:"orange",variant:-1===t.indexOf(e.value)?"ghost":"solid",background:-1===t.indexOf(e.value)?"orange.50":"orange.500",children:e.label},n)})}),(0,r.jsx)(d.kC,{mb:"3",align:"center",flexDir:"column",gap:"2",children:m.Lp.map((e,n)=>{if(!(n<=2))return(0,r.jsx)(g.zx,{w:"150px",onClick:()=>x(e.value),leftIcon:e.icon,colorScheme:"orange",variant:-1===t.indexOf(e.value)?"ghost":"solid",background:-1===t.indexOf(e.value)?"orange.50":"orange.500",children:e.label},n)})})]}),(0,r.jsx)(b.Z,{onReset:f,onSubmit:h,display:i?"flex":"none",submitButton:o})]})}var S=t(2946),k=(s=function(e){let{user:n}=e,t=(0,u.oR)(e=>e.user),[s,c]=(0,l.useState)(null!=t&&!!t.role),o=(0,u.oR)(e=>e.profile);function d(e){let n=0;switch(e){case"account":default:n=0;break;case"measurements":n=1;break;case"meal":n=2;break;case"payments":n=3}return n}let[x,h]=(0,l.useState)(s?0:d(o));return(0,l.useEffect)(()=>{s||h(d(o))},[o]),(0,l.useEffect)(()=>{(null==t?void 0:t.role)?c(!0):c(!1)},[t]),(0,l.useEffect)(()=>{window.handleSnap("PAGE_VIEW")},[]),(0,r.jsxs)(i.mQ,{onChange:e=>h(e),index:x,isFitted:!0,variant:"soft-rounded",colorScheme:"orange",children:[(0,r.jsxs)(i.td,{mb:"1em",children:[(0,r.jsx)(i.OK,{children:"حسابي "}),!s&&(0,r.jsx)(i.OK,{children:"قياساتي"}),!s&&(0,r.jsx)(i.OK,{children:" وجباتي"}),!s&&(0,r.jsx)(i.OK,{children:"المدفوعات"})]}),(0,r.jsxs)(i.nP,{children:[(0,r.jsx)(i.x4,{children:(0,r.jsx)(a.Z,{user:n})}),!s&&(0,r.jsx)(i.x4,{children:(0,r.jsx)(S.Z,{shouldRender:!s,user:n})}),!s&&(0,r.jsx)(i.x4,{children:(0,r.jsx)(w,{})}),!s&&(0,r.jsx)(i.x4,{children:(0,r.jsx)(f,{})})]})]})},function(e){if(void 0!==window){let n=(0,u.oR)(e=>e.user),t=(0,c.useRouter)();if(n||t.push("/"),n)return(0,r.jsx)(s,{user:n,...e})}return(0,r.jsx)(o.Z,{})})},2496:function(e,n,t){"use strict";t.d(n,{r:function(){return i}});var s=t(7294),r=t(6107);function i(e,n,t){let[i,l]=(0,s.useState)(!1),u=(0,s.useRef)(!0);async function c(e,n){let s=await (0,r._)({...e});s&&u.current&&(t&&t.onSuccess&&t.onSuccess(s),n&&n(s),l(!0))}return(0,s.useEffect)(()=>(u.current=!0,e?(c(e,n),t&&t.onRequest&&t.onRequest()):l(!1),()=>{u.current=!1}),[e]),{data:i}}}},function(e){e.O(0,[957,26,774,888,179],function(){return e(e.s=6896)}),_N_E=e.O()}]);