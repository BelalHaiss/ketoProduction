(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{747:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/meals",function(){return t(8495)}])},8495:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return le}});var r=t(5893),a=t(8790),o=t(7294),i=t(894),l=t(331),s=t(3750),c=t(8873),u=t(7470);function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}var x={submitActive:!1,submitLoading:!1,loadingText:"\u062c\u0627\u0631\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"},m={cups:0,date:(new Date).toLocaleDateString("en")};function p(e){var n=e.user,t=function(){h("none"),w(x)},d=((0,l.oR)((function(e){return e.setUser})),(0,o.useState)("none")),p=d[0],h=d[1],g=(0,o.useState)(!1),b=g[0],v=g[1],j=(0,o.useState)(x),y=j[0],w=j[1],S=(0,o.useState)(m),C=S[0],k=S[1],O=(0,o.useState)(m),D=O[0],z=O[1];return(0,o.useEffect)((function(){var e={isMount:!0};return(0,u.nF)(null===n||void 0===n?void 0:n._id,k,z,e),function(){e.isMount=!1}}),[]),(0,r.jsxs)(a.kC,{flexDir:"column",color:"orange.800",layerStyle:"flexCenter",gap:"3",p:"2",children:[(0,r.jsx)(a.xv,{fontSize:{base:"lg",md:"3xl"},fontWeight:"bold",children:"\u062d\u0627\u0633\u0628\u0629 \u0634\u0631\u0628 \u0627\u0644\u0645\u0627\u0621"}),(0,r.jsx)(a.xv,{fontSize:{base:"md",md:"lg"},fontWeight:"bold",children:"\u0642\u0645 \u0628\u0627\u0644\u0646\u0642\u0631 \u0639\u0644\u064a \u0627\u064a \u0643\u0648\u0628 \u0639\u0646\u062f \u0634\u0631\u0628\u0643 \u0644\u0643\u0627\u0633 \u0645\u0627\u0621 \u0648\u0627\u062d\u062f (250 \u0645\u0644)"}),(0,r.jsx)(a.kC,{gap:"2",_hover:{".active":{color:"blue.700",transform:"scale(1.2)",transition:"all .2s ease-in-out"}},cursor:"pointer",onClick:function(){C.cups>14||(h("flex"),k(f({},C,{cups:C.cups+1})),w(f({},y,{submitActive:!0})),v(!1),setTimeout((function(){v(!0)}),1500))},maxW:"400px",wrap:"wrap",layerStyle:"flexCenter",children:new Array(14).fill(0).map((function(e,n){return C.cups>=n+1?(0,r.jsx)(i.JO,{w:"50px",h:"50px",color:"blue.700",as:s.q8U},n):(0,r.jsx)(i.JO,{className:b&&C.cups===n?"active":"",w:"50px",h:"50px",color:"gray.200",as:s.q8U},n)}))}),(0,r.jsx)(c.Z,{display:p,onReset:function(){k(D),t()},onSubmit:function(){var e=C;e.cups>14&&(e.cups=14),(0,u.sd)(e,n,z),t()},submitButton:y})]})}var h=t(8428),g=t(2496);function b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){b(e,n,t[n])}))}return e}var j={submitActive:!1,submitLoading:!1,loadingText:"\u062c\u0627\u0631\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"},y=[{value:"sleepy",label:"\u0646\u0639\u0627\u0633"},{value:"moody",label:"\u0645\u062a\u0642\u0644\u0628"},{value:"happy",label:"\u0633\u0639\u064a\u062f"},{value:"tired",label:"\u0645\u062a\u0639\u0628"},{value:"ignore",label:"\u0644\u0627 \u0645\u0628\u0627\u0644\u064a"},{value:"clear",label:"\u0635\u0627\u0641\u064a"},{value:"active",label:"\u0646\u0634\u064a\u0637"}],w=[{value:"headache",label:"\u0635\u062f\u0627\u0639"},{value:"bloating",label:"\u0627\u0646\u062a\u0641\u0627\u062e \u0627\u0644\u0645\u0639\u062f\u0629"},{value:"stomach",label:"\u0627\u0644\u0645 \u0627\u0644\u0645\u0639\u062f\u0629"},{value:"thirsty",label:"\u0639\u0637\u0634"},{value:"disgust",label:"\u0634\u0639\u0648\u0631 \u063a\u062b\u064a\u0627\u0646"},{value:"smell",label:"\u0631\u0627\u0626\u062d\u0629 \u0641\u0645 \u0643\u0631\u064a\u0647\u0629"},{value:"constipation",label:"\u0627\u0645\u0633\u0627\u0643 \u0627\u0644\u0645\u0639\u062f\u0629"}],S={mood:"",symptoms:""};function C(e){var n=e.user,t=function(){k("none"),z(j)},i=function(e,n){d(v({},s,b({},e,n))),z(v({},D,{submitActive:!0})),k("flex")},l=(0,o.useState)(S),s=l[0],d=l[1],f=(0,o.useState)(S),x=f[0],m=f[1],p=(0,o.useState)("none"),C=p[0],k=p[1],O=(0,o.useState)(j),D=O[0],z=O[1],E=(0,o.useState)(!1),P=E[0],_=E[1];(0,g.r)(P?{url:"/users/status/".concat(n._id),method:"post",data:{symptoms:s.symptoms,mood:s.mood,user:n._id,date:(new Date).toLocaleDateString("en")},successToast:"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0628\u0646\u062c\u0627\u062d"}:null,d,{onRequest:function(){return _(!1)},onSuccess:function(e){t(),m(e)}});return(0,o.useEffect)((function(){var e={current:!0};return(0,u.lR)(null===n||void 0===n?void 0:n._id,d,e,m),function(){e.current=!1}}),[]),(0,r.jsxs)(a.kC,{bg:"orange.100",flexDir:"column",color:"orange.800",layerStyle:"flexCenter",gap:"3",p:"2",children:[(0,r.jsx)(a.xv,{fontSize:{base:"lg",md:"3xl"},fontWeight:"bold",children:"\u062d\u0627\u0644\u062a\u0643 \u0627\u0644\u0645\u0632\u0627\u062c\u064a\u0629"}),(0,r.jsx)(a.xv,{fontSize:{base:"md",md:"lg"},children:"\u0646\u0648\u062f \u0645\u0639\u0631\u0641\u0629 \u062d\u0627\u0644\u062a\u0643 \u0627\u0644\u0645\u0632\u0627\u062c\u064a\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u064a\u0648\u0645 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),(0,r.jsxs)(a.kC,{w:"100%",flexDir:"column",children:[(0,r.jsx)(a.xv,{px:"4",fontSize:{base:"md",md:"xl"},fontWeight:"bold",children:"\u0645\u0632\u0627\u062c\u0643 \u0644\u0647\u0630\u0627 \u0627\u0644\u064a\u0648\u0645"}),(0,r.jsx)(a.kC,{w:"100%",gap:"1",my:"3",wrap:"wrap",children:y.map((function(e){return(0,r.jsxs)(a.kC,{gap:"2",align:"center",flexDir:"column",w:"90px",cursor:"pointer",children:[(0,r.jsx)(h.Ee,{cursor:"pointer",src:"/home/status/"+e.value+".svg",alt:e.value,w:"50px",onClick:function(){return i("mood",e.value)},borderRadius:s.mood===e.value?"20%":"initial",transform:s.mood===e.value?"scale(1.2)":"none",bg:s.mood===e.value?"yellow.600":"transparent",_hover:{transform:"scale(1.2)",transition:"all .2s ease-in-out",bg:"yellow.600",borderRadius:"20%"}}),(0,r.jsx)(a.xv,{textAlign:"center",fontSize:{base:"md",md:"lg"},children:e.label})]},e.value)}))})]}),(0,r.jsxs)(a.kC,{w:"100%",gap:"1",flexDir:"column",children:[(0,r.jsx)(a.xv,{fontSize:{base:"md",md:"xl"},fontWeight:"bold",children:"\u0627\u0644\u0623\u0639\u0631\u0627\u0636 \u0644\u0647\u0630\u0627 \u0627\u0644\u064a\u0648\u0645"}),(0,r.jsx)(a.kC,{w:"100%",gap:"1",my:"3",wrap:"wrap",children:w.map((function(e){return(0,r.jsxs)(a.kC,{gap:"2",align:"center",flexDir:"column",w:"89px",children:[(0,r.jsx)(h.Ee,{cursor:"pointer",src:"/home/status/"+e.value+".svg",alt:e.value,w:"50px",onClick:function(){return i("symptoms",e.value)},borderRadius:s.symptoms===e.value?"20%":"initial",transform:s.symptoms===e.value?"scale(1.2)":"none",bg:s.symptoms===e.value?"yellow.600":"transparent",_hover:{transform:"scale(1.2)",transition:"all .2s ease-in-out",bg:"yellow.600",borderRadius:"20%"}}),(0,r.jsx)(a.xv,{textAlign:"center",fontSize:{base:"md",md:"lg"},children:e.label})]},e.value)}))})]}),(0,r.jsx)(c.Z,{display:C,onReset:function(){d(x),t()},onSubmit:function(){z(v({},D,{submitLoading:!0})),_(!0)},submitButton:D})]})}var k=t(4051),O=t.n(k),D=t(2547),z=t(5054),E=t(830),P=t(155),_=t(252),R=t(6107);function W(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function N(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){W(o,r,a,i,l,"next",e)}function l(e){W(o,r,a,i,l,"throw",e)}i(void 0)}))}}function A(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){A(e,n,t[n])}))}return e}function T(){return{carbs:0,fats:0,proteins:0,calories:0}}function q(e){var n=e.setFetchCalories,t=function(e,n){g(!0),j(F({},v,A({},e,+n)))},i=(0,l.oR)((function(e){return e.user})),s=(0,D.qY)(),c=s.isOpen,u=s.onOpen,d=s.onClose,f=(0,o.useState)(!1),x=f[0],m=f[1],p=(0,o.useState)(!1),h=p[0],g=p[1],b=(0,o.useState)(T),v=b[0],j=b[1];function y(){return(y=N(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,(0,R._)({url:"/users/addcustommeal/".concat(i._id),method:"post",data:F({},v,{date:(new Date).toLocaleDateString("en")}),successToast:"\u062a\u0645 \u0627\u0644\u0627\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d "});case 3:m(!1),j({carbs:0,fats:0,proteins:0,calories:0}),n(!0),d();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(a.kC,{w:"100%",mt:"-3",mb:"2",children:[(0,r.jsx)(z.zx,{colorScheme:"orange",w:"60vw",leftIcon:(0,r.jsx)(P.ATl,{fontSize:"30px"}),mx:"auto",onClick:u,children:"\u0627\u0636\u0641 \u0648\u062c\u0628\u062a\u0643 \u0627\u0644\u062e\u0627\u0635\u0647"}),(0,r.jsxs)(E.u_,{isOpen:c,onClose:d,children:[(0,r.jsx)(E.ZA,{}),(0,r.jsxs)(E.hz,{children:[(0,r.jsx)(E.xB,{children:" \u0648\u062c\u0628\u062a\u0643 \u0627\u0644\u062e\u0627\u0635\u0647 "}),(0,r.jsx)(E.ol,{}),(0,r.jsxs)(E.fe,{children:[(0,r.jsx)(_.J,{type:"number",label:"\u0627\u0644\u0633\u0639\u0631\u0627\u062a \u0627\u0644\u062d\u0631\u0627\u0631\u064a\u0629",name:"calories",value:v.calories,onChange:t,readOnly:x}),(0,r.jsx)(_.J,{type:"number",label:"\u0627\u0644\u0643\u0631\u0628\u0648\u0647\u064a\u062f\u0631\u0627\u062a ",name:"carbs",value:v.carbs,onChange:t,readOnly:x}),(0,r.jsx)(_.J,{type:"number",label:"\u0627\u0644\u0628\u0631\u0648\u062a\u064a\u0646\u0627\u062a ",name:"proteins",value:v.proteins,onChange:t,readOnly:x}),(0,r.jsx)(_.J,{type:"number",label:"\u0627\u0644\u062f\u0647\u0648\u0646 ",name:"fats",value:v.fats,onChange:t,readOnly:x})]}),(0,r.jsxs)(E.mz,{children:[(0,r.jsx)(z.zx,{ml:"3",onClick:d,children:"\u0627\u0644\u063a\u0627\u0621"}),(0,r.jsx)(z.zx,{disabled:!h,onClick:function(){return y.apply(this,arguments)},colorScheme:"green",children:"\u0627\u0636\u0627\u0641\u0647"})]})]})]})]})}var L=t(1649),B=t(8584),J=t(6373);function Z(e){var n=e.loading,t=e.docsCount,o=e.data,i=e.action;return n?(0,r.jsx)(a.kC,{w:"100%",align:"center",justify:"space-around",gap:"2",children:new Array(t).fill(0).map((function(e,n){return(0,r.jsx)(B.Od,{borderRadius:"xl",w:"190px",h:"250px"},n)}))}):(0,r.jsx)(a.kC,{align:"center",justify:"space-around",w:"100%",gap:"1",children:o.map((function(e,n){return(0,r.jsx)(J.E,{className:"next"===i?"nextAnimation":"prev"===i?"prevAnimation":"",meal:e},n)}))})}function M(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){M(e,n,t[n])}))}return e}function K(e,n,t){var r=e-60,a=Math.floor(r/190);return n&&n(a),t&&t({start:0,end:a}),a}function U(e){var n=e.link,t=e.label,l=(0,o.useState)(K(window.innerWidth)),s=l[0],c=l[1],u=(0,o.useState)({current:1,docsNumbers:0}),d=u[0],f=u[1],x=(0,o.useState)([]),m=x[0],p=x[1],h=(0,o.useState)(!0),b=h[0],v=h[1],j=(0,o.useState)({start:0,end:0}),y=j[0],w=j[1],S=(0,o.useState)(""),C=S[0],k=S[1],O=(0,o.useState)(!0),D=O[0],z=O[1];(0,g.r)(D?{url:n+d.current,noErrorToast:!0}:null,null,{onRequest:function(){return z(!1)},onSuccess:function(e){var n=e.meals;p(m.concat(n)),f(I({},d,{docsNumbers:e.count})),K(window.innerWidth,c,1===d.current?w:null),d.current>1&&w({start:y.start+s,end:y.end+s}),v(!1)}});var E=function(){v(!0),c(K(window.innerWidth,c,w)),v(!1)};return(0,o.useEffect)((function(){return window.addEventListener("resize",E),function(){window.removeEventListener("resize",E)}}),[]),(0,r.jsxs)(a.kC,{w:"100%",overflow:"hidden",flexDir:"column",my:"4",gap:"2",children:[(0,r.jsx)(a.xv,{px:"4",fontSize:{base:"md",md:"xl"},fontWeight:"bold",children:t}),(0,r.jsxs)(a.kC,{justify:"space-between",bg:"orange.50",borderRadius:"xl",align:"center",py:"10px",h:"270px",w:"100%",children:[(0,r.jsx)(i.JO,{as:L.hjJ,onClick:function(){if(!b&&d.docsNumbers&&m.length&&!(y.end>=d.docsNumbers)){if(y.end<m.length&&(y.end+s<=m.length||m.length===d.docsNumbers))w({start:y.start+s,end:y.end+s});else{v(!0);var e=d.current+1;f(I({},d,{current:e})),z(!0)}k("next"),setTimeout((function(){k("")}),300)}},cursor:"pointer",w:"30px",h:"30px",color:!b&&d.docsNumbers&&(y.end<m.length||m.length<d.docsNumbers)?"orange.500":"orange.100"}),(0,r.jsx)(Z,{action:C,loading:b,docsCount:s,data:m.slice(y.start,y.end)}),(0,r.jsx)(i.JO,{as:L.u1R,onClick:function(){!b&&d.docsNumbers&&0!==y.start&&(w({start:y.start-s,end:y.start}),k("prev"),setTimeout((function(){k("")}),300))},w:"30px",h:"30px",cursor:"pointer",color:!b&&d.docsNumbers&&y.start>0?"orange.500":"orange.200"})]})]})}function V(){return(0,r.jsxs)(a.kC,{py:"1",bg:"orange.100",align:"center",flexDir:"column",children:[(0,r.jsx)(a.xv,{color:"orange.800",fontSize:{base:"lg",md:"3xl"},fontWeight:"bold",children:"\u0642\u0645 \u0628\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0648\u062c\u0628\u0629 \u0627\u0644\u0644\u062a\u064a \u0633\u062a\u0627\u0643\u0644\u0647\u0627"}),(0,r.jsx)(U,{link:"/meals/query?time=breakfast&page=",label:"\u0648\u062c\u0628\u0627\u062a \u0627\u0644\u0627\u0641\u0637\u0627\u0631"}),(0,r.jsx)(U,{link:"/meals/query?time=lunch&page=",label:"\u0648\u062c\u0628\u0627\u062a \u0627\u0644\u063a\u062f\u0627\u0621"}),(0,r.jsx)(U,{link:"/meals/query?time=snack&page=",label:"\u0648\u062c\u0628\u0627\u062a \u0627\u0644\u062e\u0641\u064a\u0641\u0629"}),(0,r.jsx)(U,{link:"/meals/query?time=dinner&page=",label:"\u0648\u062c\u0628\u0627\u062a \u0627\u0644\u0639\u0634\u0627\u0621"})]})}function X(){return(0,r.jsxs)(a.kC,{w:"100%",flexDir:"column",p:"1",justify:"space-around",align:"center",children:[(0,r.jsx)("div",{className:"half_circle_loader"}),(0,r.jsxs)(a.kC,{w:"100%",mt:"5",justify:"space-around",align:"center",children:[(0,r.jsxs)(a.kC,{w:"45%",flexDir:"column",gap:"5",align:"center",children:[(0,r.jsx)(B.Od,{startColor:"purple.500",height:"5px",width:"100%"}),(0,r.jsx)(B.Od,{startColor:"red.500",height:"5px",width:"100%"}),(0,r.jsx)(B.Od,{startColor:"green.500",height:"5px",width:"100%"})]}),(0,r.jsxs)(a.kC,{w:"45%",flexDir:"column",gap:"5",align:"center",children:[(0,r.jsx)(B.Od,{height:"5px",width:"100%"}),(0,r.jsx)(B.Od,{height:"5px",width:"100%"}),(0,r.jsx)(B.Od,{height:"5px",width:"100%"}),(0,r.jsx)(B.Od,{height:"5px",width:"100%"})]})]})]})}var $=t(8152);function Q(e){var n=e.label,t=e.energy,o=e.colorScheme,i=e.value;return(0,r.jsxs)(a.kC,{color:"orange.800",flexDir:"column",gap:"2",children:[(0,r.jsxs)(a.xv,{fontSize:"lg",fontWeight:"bold",children:[" ","\u0627\u062d\u062a\u064a\u0627\u062c\u0643 \u0645\u0646 ",n+" ".concat(t.total," \u062c\u0645")," "]}),(0,r.jsx)($.Ex,{hasStripe:!0,isAnimated:!0,colorScheme:o,size:"xs",mx:"2",value:i,bg:o+".100"}),(0,r.jsx)(a.xv,{fontSize:"xs",children:t.total-t.actual<0?"\u0644\u0642\u062f \u0627\u0633\u062a\u0647\u0644\u0643\u062a \u0627\u0643\u062b\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645  (".concat(t.actual,") \u062c\u0645"):"\u0627\u0633\u062a\u0647\u0644\u0643\u062a ".concat(t.actual," \u0645\u062a\u0628\u0642\u064a \u0644\u0643 ").concat(t.total-t.actual," \u063a\u0645")})]})}var Y=t(770);function G(e){return[{label:"\u0627\u0644\u0643\u0631\u0628\u0648\u0647\u064a\u062f\u0631\u0627\u062a",colorScheme:"purple",value:e.reduce((function(e,n){return e+ +n.carbs}),0)},{label:"\u0627\u0644\u0628\u0631\u0648\u062a\u064a\u0646\u0627\u062a",colorScheme:"red",value:e.reduce((function(e,n){return e+ +n.proteins}),0)},{label:"\u0627\u0644\u062f\u0647\u0648\u0646",colorScheme:"green",value:e.reduce((function(e,n){return e+ +n.fats}),0)}]}function H(e){var n=e.data;return(0,r.jsx)(a.kC,{w:"100%",flexDir:"column",gap:"3",align:"center",children:Object.keys(n).map((function(e,t){return(0,r.jsxs)(a.kC,{w:"100%",align:"center",justify:"space-around",children:[(0,r.jsxs)(a.xv,{pt:"2",color:"orange.800",fontSize:{base:"sm",md:"md"},fontWeight:"bold",children:["\u0648\u062c\u0628\u0627\u062a ",(0,Y.Fw)(e)]}),(0,r.jsx)(a.kC,{align:"center",py:"2",px:"3",mt:"2",bg:"white",borderRadius:"xl",justify:"space-around",w:"75%",children:G(n[e]).map((function(e,n){return(0,r.jsxs)(a.Ct,{className:"energyBadge",fontSize:{base:"7px",md:"13px"},colorScheme:e.colorScheme,children:[" ","".concat(e.label," ").concat(e.value," \u062c\u0645")," "]},n)}))})]},t)}))})}var ee=t(3957);function ne(e){var n=e.isOpen,t=e.onClose,o=e.mealsData;return(0,r.jsxs)(E.u_,{isOpen:n,size:{base:"full",md:"6xl"},onClose:t,children:[(0,r.jsx)(E.ZA,{}),(0,r.jsxs)(E.hz,{children:[(0,r.jsxs)(E.xB,{textAlign:"center",children:[" ","\u0627\u0644\u0648\u062c\u0628\u0627\u062a \u0627\u0644\u062a\u064a \u062a\u0645 \u062a\u0646\u0627\u0648\u0644\u0647\u0627 \u0627\u0644\u064a\u0648\u0645"]}),(0,r.jsx)(E.ol,{}),(0,r.jsx)(E.fe,{children:(0,r.jsxs)(ee.mQ,{isFitted:!0,variant:"soft-rounded",colorScheme:"orange",children:[(0,r.jsxs)(ee.td,{children:[(0,r.jsx)(ee.OK,{children:"\u0648\u062c\u0628\u0627\u062a \u0627\u0644\u0641\u0637\u0648\u0631"}),(0,r.jsx)(ee.OK,{children:"\u0648\u062c\u0628\u0627\u062a \u0627\u0644\u063a\u062f\u0627\u0621"}),(0,r.jsx)(ee.OK,{children:"\u0648\u062c\u0628\u0627\u062a \u0627\u0644\u0639\u0634\u0627\u0621"}),(0,r.jsx)(ee.OK,{children:"\u0648\u062c\u0628\u0627\u062a \u062e\u0641\u064a\u0641\u0629"})]}),(0,r.jsxs)(ee.nP,{children:[(0,r.jsx)(ee.x4,{children:(0,r.jsx)(a.kC,{wrap:"wrap",p:"1",gap:"2",children:o.breakfast.map((function(e,n){return(0,r.jsx)(J.E,{time:"breakfast",meal:e},n)}))})}),(0,r.jsx)(ee.x4,{children:(0,r.jsx)(a.kC,{wrap:"wrap",p:"1",gap:"2",children:o.lunch.map((function(e,n){return(0,r.jsx)(J.E,{time:"lunch",meal:e},n)}))})}),(0,r.jsx)(ee.x4,{children:(0,r.jsx)(a.kC,{wrap:"wrap",p:"1",gap:"2",children:o.dinner.map((function(e,n){return(0,r.jsx)(J.E,{time:"dinner",meal:e},n)}))})}),(0,r.jsx)(ee.x4,{children:(0,r.jsx)(a.kC,{wrap:"wrap",p:"1",gap:"2",children:o.snack.map((function(e,n){return(0,r.jsx)(J.E,{time:"snack",meal:e},n)}))})})]})]})}),(0,r.jsx)(E.mz,{children:(0,r.jsx)(z.zx,{colorScheme:"yellow",mr:3,onClick:t,children:"\u0627\u0644\u063a\u0627\u0621"})})]})]})}var te=t(8193);function re(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){re(e,n,t[n])}))}return e}function oe(){return{total:100,actual:10}}function ie(e){var n=e.fetchCalories,t=e.setFetchCalories,s=(0,l.oR)((function(e){return e.user})),c=(0,o.useState)(!0),u=c[0],d=c[1],f=(0,o.useState)(oe),x=f[0],m=f[1],p=(0,o.useState)(oe),h=p[0],b=p[1],v=(0,o.useState)(oe),j=v[0],y=v[1],w=(0,o.useState)(oe),S=w[0],C=w[1],k=(0,o.useState)(!0),O=k[0],D=k[1],E=(0,o.useState)(null),P=E[0],_=E[1],R=(0,o.useState)(!1),W=R[0],N=R[1];return(0,o.useEffect)((function(){n&&D(!0)}),[n]),(0,g.r)(O?{url:"/users/getmeal/".concat(s._id,"?date=").concat((new Date).toLocaleDateString("en"))}:null,null,{onRequest:function(){t(!1),D(!1)},onSuccess:function(e){_(e.mealsData);var n=(0,Y.v0)(e.mealsData,e.custom);b((function(e){return ae({},e,{actual:+n.proteins.toFixed(0)})})),C((function(e){return ae({},e,{actual:+n.carbs.toFixed(0)})})),y((function(e){return ae({},e,{actual:+n.fats.toFixed(0)})})),m((function(e){return ae({},e,{actual:+n.calories.toFixed(0)})})),d(!1)}}),(0,o.useEffect)((function(){var e=(0,Y.WO)(s.willing,s.physicalActivity,s.measurements);m((function(n){return ae({},n,{total:+e.calories.toFixed(0)})})),b((function(n){return ae({},n,{total:+e.proteins.toFixed(0)})})),y((function(n){return ae({},n,{total:+e.fats.toFixed(0)})})),C((function(n){return ae({},n,{total:+e.carbs.toFixed(0)})}))}),[]),(0,o.useEffect)((function(){var e=document.getElementById("caloriesCanvas"),n=Math.PI/180;if(e){var t=x.actual/x.total*180+180,r=e.getContext("2d");r.beginPath(),r.lineWidth=9,r.strokeStyle="#FBD38D",r.arc(180,120,110,180*n,360*n,!1),r.stroke(),r.beginPath(),r.lineWidth=9,r.lineCap="round",r.strokeStyle="#7B341E",r.arc(180,120,110,180*n,t*n,!1),r.stroke()}}),[u,x]),(0,r.jsxs)(a.kC,{w:"100%",flexDir:"column",p:"1",align:"center",children:[(0,r.jsx)(a.xv,{color:"orange.800",fontSize:{base:"lg",lg:"3xl"},fontWeight:"semibold",children:"\u0633\u0639\u0631\u0627\u062a\u0643 \u0627\u0644\u062d\u0631\u0627\u0631\u064a\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u064a\u0648\u0645"}),u&&(0,r.jsx)(X,{}),!u&&(0,r.jsxs)(a.kC,{position:"relative",children:[(0,r.jsx)("canvas",{id:"caloriesCanvas",width:"360",height:"180"}),(0,r.jsxs)(a.kC,{color:"orange.800",flexDir:"column",position:"absolute",top:"47px",right:"120",align:"center",children:[(0,r.jsx)(i.JO,{w:"8",h:"8",mb:"2",as:te.o$9}),(0,r.jsxs)(a.xv,{fontWeight:"bold",children:[" \u0627\u0633\u062a\u0647\u0644\u0643\u062a ",x.actual," \u0633\u0639\u0631\u0647"]}),(0,r.jsx)(a.xv,{children:x.total-x.actual<0?"\u0627\u0633\u062a\u0647\u0644\u0643\u062a \u0627\u0643\u062b\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645":" \u0645\u062a\u0628\u0642\u064a \u0644\u0643 ".concat(x.total-x.actual," \u0633\u0639\u0631\u0647")})]})]}),!u&&(0,r.jsxs)(a.kC,{w:"100%",gap:"10",align:"center",flexDir:{base:"column",lg:"row"},children:[(0,r.jsxs)(a.kC,{w:{base:"100%",lg:"48%"},gap:"3",flexDir:"column",children:[(0,r.jsx)(Q,{energy:S,label:"\u0627\u0644\u0643\u0631\u0628\u0648\u0647\u064a\u062f\u0631\u0627\u062a",colorScheme:"purple",value:S.actual/S.total*100}),(0,r.jsx)(Q,{energy:h,label:"\u0627\u0644\u0628\u0631\u0648\u062a\u064a\u0646\u0627\u062a",colorScheme:"red",value:h.actual/h.total*100}),(0,r.jsx)(Q,{energy:j,label:"\u0627\u0644\u062f\u0647\u0648\u0646",colorScheme:"green",value:j.actual/j.total*100})]}),(0,r.jsxs)(a.kC,{w:{base:"100%",lg:"48%"},bg:"orange.200",flexDir:"column",borderRadius:"xl",p:"1",align:"center",boxShadow:"xl",children:[(0,r.jsxs)(a.kC,{w:"100%",align:"center",p:"1",justify:"space-around",children:[(0,r.jsx)(a.xv,{color:"orange.900",fontSize:{base:"md",md:"xl"},fontWeight:"bold",children:"\u0645\u062d\u062a\u0648\u064a \u0627\u0643\u0644\u0643 \u0644\u0647\u0630\u0627 \u0627\u0644\u064a\u0648\u0645"}),(0,r.jsx)(z.zx,{onClick:function(){return N(!0)},size:{base:"sm",md:"md"},colorScheme:"orange",children:"\u0639\u0631\u0636 \u0627\u0644\u0648\u062c\u0628\u0627\u062a"})]}),P&&(0,r.jsx)(H,{data:P})]}),(0,r.jsx)(ne,{onClose:function(){return N(!1)},isOpen:W,mealsData:P})]})]})}var le=(0,t(3412).Z)((function(e){var n=e.user,t=e.endDate;e.isSubscriped,(0,o.useEffect)((function(){}),[]);var i=(0,o.useState)(!1),l=i[0],s=i[1];return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsxs)(a.xv,{textAlign:"center",fontSize:"xs",children:["\u062a\u0627\u0631\u064a\u062e \u0627\u0646\u062a\u0647\u0627\u0621 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 : ",t]}),(0,r.jsxs)(a.kC,{gap:"5",flexDir:"column",children:[(0,r.jsx)(ie,{setFetchCalories:s,fetchCalories:l}),(0,r.jsx)(V,{}),(0,r.jsx)(q,{setFetchCalories:s}),(0,r.jsx)(p,{user:n}),(0,r.jsx)(C,{user:n})]})]})}),"meal")},3412:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(5893),a=t(1163),o=t(7294),i=t(4781),l=t(331),s=t(5110),c=t(5832);function u(e,n){return function(){var t=(0,a.useRouter)(),u=(0,o.useState)(!0),d=u[0],f=u[1],x=(0,o.useState)(!1),m=x[0],p=x[1],h=(0,o.useState)(!1),g=h[0],b=h[1],v=(0,o.useState)(""),j=v[0],y=v[1],w=(0,l.oR)((function(e){return e.user})),S=(0,l.oR)((function(e){return e.prices}));return(0,o.useEffect)((function(){if(w&&(null===S||void 0===S?void 0:S.length))if("pricing"===n)(0,s.b)(w,"meal").status?t.replace("/"):f(!1);else if("meal"===n){if(!(0,s.b)(w,"meal").status)return t.replace("/pricing"),void(0,c.Z)("\u064a\u062c\u0628 \u0639\u0644\u064a\u0643 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0641\u064a \u0628\u0627\u0642\u0627\u062a \u0627\u0644\u0643\u064a\u062a\u0648","info");p(!0),y((0,s.b)(w,"meal").end),f(!1)}else(0,s.b)(w,n).status?(p(!0),y((0,s.b)(w,n).end)):p(!1),f(!1);(null===S||void 0===S?void 0:S.length)&&!w&&("pricing"===n?(b(!0),f(!1)):t.replace("/"))}),[w,S]),d?(0,r.jsx)(i.Z,{}):(0,r.jsx)(e,{user:w,endDate:j,isSubscriped:m,vistor:g})}}},770:function(e,n,t){"use strict";function r(e,n){var t=0,r=0,a=0,o=0;for(var i in e)e[i].map((function(e){t+=e.carbs,r+=e.fats,a+=e.proteins,o+=e.calories}));return t+=n.carbs,r+=n.fats,a+=n.proteins,o+=n.calories,{carbs:t,fats:r,proteins:a,calories:o}}function a(e,n,t){var r;return r=10*t.weight+6.25*t.height-5*t.age,r+="male"===t.sex?5:-161,r*=function(e){switch(e){case"sedentary":return 1.2;case"light":return 1.375;case"moderate":return 1.55;case"active":return 1.725}}(n),r=function(e,n,t){var r=e;return r-="male"===n?"max"===t?500:250:"max"===t?300:150}(r,t.sex,e),{calories:r,carbs:.05*r/4,fats:.7*r/9,proteins:.25*r/4}}function o(e){var n="";switch(e){case"breakfast":n="\u0627\u0644\u0627\u0641\u0637\u0627\u0631";break;case"dinner":n="\u0627\u0644\u0639\u0634\u0627\u0621";break;case"lunch":n="\u0627\u0644\u063a\u062f\u0627\u0621";break;case"snack":n="\u062e\u0641\u064a\u0641\u0629"}return n}t.d(n,{Fw:function(){return o},WO:function(){return a},v0:function(){return r}})},6373:function(e,n,t){"use strict";t.d(n,{E:function(){return u}});var r=t(5893),a=t(8790),o=t(8428),i=t(5054),l=t(7294),s=t(1163),c=t(331);function u(e){var n=e.meal,t=(e.width,e.size,e.className),u=e.time,d=(0,s.useRouter)(),f=(0,c.oR)((function(e){return e.setMealView})),x=(0,c.oR)((function(e){return e.user})),m=(0,l.useState)(!1),p=m[0],h=m[1];return(0,r.jsxs)(a.kC,{flexDir:"column",p:"1",bg:"orange.100",className:null!==t&&void 0!==t?t:"",onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},rounded:"xl",color:"orange.800",w:"190px",h:"250px",layerStyle:"flexCenter",children:[(0,r.jsx)(o.Ee,{src:n.image.url?n.image.url:"https://res.cloudinary.com/ketoar/image/upload/v1/".concat(n.image),alt:"meal",mb:"3",rounded:"3xl",w:"140px"}),p?(0,r.jsxs)(a.kC,{gap:"1",h:"35%",align:"center",flexDir:"column",children:[("admin"===(null===x||void 0===x?void 0:x.role)||(null===x||void 0===x?void 0:x._id)===n.addedBy)&&(0,r.jsx)(i.zx,{size:{base:"sm",md:"md"},onClick:function(){f(n),d.replace("/admin/addMeal?edit="+n._id)},colorScheme:"yellow",children:"\u062a\u0639\u062f\u064a\u0644"}),(0,r.jsx)(i.zx,{size:{base:"sm",md:"md"},colorScheme:"orange",w:"90%",onClick:function(){f(n),d.replace({pathname:"/mealView",query:{time:u||""}},"/mealView")},children:"\u062a\u062d\u0636\u064a\u0631 \u0627\u0644\u0648\u062c\u0628\u0629"})]}):(0,r.jsxs)(a.kC,{align:"center",gap:"1",h:"35%",flexDir:"column",children:[(0,r.jsx)(a.xv,{fontSize:{base:"md",md:"lg"},fontWeight:"bold",children:n.name.slice(0,19)}),(0,r.jsxs)(a.xv,{children:[" ",n.duration," \u062f\u0642\u0627\u0626\u0642"]}),(0,r.jsxs)(a.Ct,{colorScheme:"red",variant:"subtle",fontSize:"sm",rounded:"lg",px:"3",children:[n.calories," \u0633\u0639\u0631\u0647"]})]})]})}},2496:function(e,n,t){"use strict";t.d(n,{r:function(){return d}});var r=t(4051),a=t.n(r),o=t(7294),i=t(6107);function l(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){l(o,r,a,i,s,"next",e)}function s(e){l(o,r,a,i,s,"throw",e)}i(void 0)}))}}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){c(e,n,t[n])}))}return e}function d(e,n,t){var r=(0,o.useState)(!1),l=r[0],c=r[1],d=(0,o.useRef)(!0);function f(){return(f=s(a().mark((function e(n,r){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i._)(u({},n));case 2:(o=e.sent)&&d.current&&(t&&t.onSuccess&&t.onSuccess(o),r&&r(o),c(!0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.useEffect)((function(){return d.current=!0,e?(!function(e,n){f.apply(this,arguments)}(e,n),t&&t.onRequest&&t.onRequest()):c(!1),function(){d.current=!1}}),[e]),{data:l}}},8873:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893),a=t(8790),o=t(5054);function i(e){var n=e.onReset,t=void 0===n?function(){}:n,i=e.onSubmit,l=void 0===i?function(){}:i,s=e.display,c=void 0===s?"none":s,u=e.submitButton,d=void 0===u?{submitActive:!1,submitLoading:!1,loadingText:"\u062c\u0627\u0631\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"}:u;return(0,r.jsxs)(a.kC,{display:c,my:"2",align:"center",w:"100%",justify:"space-around",children:[(0,r.jsx)(o.zx,{w:{base:"120px",md:"200px"},colorScheme:"yellow",onClick:t,children:"\u0627\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u0639\u062f\u064a\u0644\u0627\u062a"}),(0,r.jsx)(o.zx,{isLoading:d.submitLoading,loadingText:d.loadingText,disabled:!d.submitActive,w:{base:"120px",md:"200px"},colorScheme:"green",onClick:l,children:"\u062d\u0641\u0638 \u0627\u0644\u062a\u0639\u062f\u064a\u0644\u0627\u062a"})]})}},252:function(e,n,t){"use strict";t.d(n,{J:function(){return c}});var r=t(5893),a=t(3789),o=t(4612),i=t(8790),l=t(1391),s=t(3441);function c(e){var n=e.type,t=e.value,c=e.name,u=e.label,d=e.onChange,f=e.width,x=e.options,m=e.readOnly,p=void 0!==m&&m;return(0,r.jsxs)(a.NI,{maxW:f||"500px",children:[(0,r.jsx)(a.lX,{htmlFor:c,children:u}),("text"===n||"number"===n||"array"===n)&&(0,r.jsx)(o.II,{color:"orange.500",readOnly:"image"===c||p,id:c,focusBorderColor:"orange.500",type:n,name:c,value:"object"===typeof t?t.join(","):t,onChange:function(e){return d(c,e.target.value)}}),"select"===n&&(0,r.jsx)(i.kC,{sx:{"div > div":{left:"10px",right:"unset"}},children:(0,r.jsx)(l.Ph,{id:c,value:t,onChange:function(e){return d(c,e.target.value)},name:c,placeholder:u,children:null===x||void 0===x?void 0:x.map((function(e,n){return(0,r.jsx)("option",{value:e.value,children:e.label},n)}))})}),"textarea"===n&&(0,r.jsx)(s.g,{color:"orange.500",id:c,focusBorderColor:"orange.500",name:c,value:t,onChange:function(e){return d(c,e.target.value)}})]})}},4781:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893),a=t(8790),o=t(9609);function i(e){var n=e.text;return(0,r.jsxs)(a.kC,{p:"3",flex:"1",justifyContent:"center",flexDir:"column",alignItems:"center",children:[(0,r.jsx)(o.$,{transform:"translate(-50%, -50%)",thickness:"7px",speed:"0.65s",w:"8rem",h:"8rem",emptyColor:"orange.200",color:"orange.700"}),n&&(0,r.jsx)(a.xv,{children:n})]})}}},function(e){e.O(0,[260,617,866,957,555,774,888,179],(function(){return n=747,e(e.s=n);var n}));var n=e.O();_N_E=n}]);