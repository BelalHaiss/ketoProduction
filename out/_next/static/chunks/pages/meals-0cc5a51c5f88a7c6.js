(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{747:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/meals",function(){return n(8495)}])},8495:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var l=n(5893),a=n(8790),s=n(7294),r=n(894),o=n(331),i=n(3750),c=n(8873),u=n(7470);let d={submitActive:!1,submitLoading:!1,loadingText:"جاري تحديث البيانات"},x={cups:0,date:new Date().toLocaleDateString("en")};function m(e){let{user:t}=e;(0,o.oR)(e=>e.setUser);let[n,m]=(0,s.useState)("none"),[h,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(d),[j,b]=(0,s.useState)(x),[v,w]=(0,s.useState)(x);function S(){m("none"),g(d)}return(0,s.useEffect)(()=>{let e={isMount:!0};return(0,u.nF)(null==t?void 0:t._id,b,w,e),()=>{e.isMount=!1}},[]),(0,l.jsxs)(a.kC,{flexDir:"column",color:"orange.800",layerStyle:"flexCenter",gap:"3",p:"2",children:[(0,l.jsx)(a.xv,{fontSize:{base:"lg",md:"3xl"},fontWeight:"bold",children:"حاسبة شرب الماء"}),(0,l.jsx)(a.xv,{fontSize:{base:"md",md:"lg"},fontWeight:"bold",children:"قم بالنقر علي اي كوب عند شربك لكاس ماء واحد (250 مل)"}),(0,l.jsx)(a.kC,{gap:"2",_hover:{".active":{color:"blue.700",transform:"scale(1.2)",transition:"all .2s ease-in-out"}},cursor:"pointer",onClick:function(){j.cups>14||(m("flex"),b({...j,cups:j.cups+1}),g({...f,submitActive:!0}),p(!1),setTimeout(()=>{p(!0)},1500))},maxW:"400px",wrap:"wrap",layerStyle:"flexCenter",children:Array(14).fill(0).map((e,t)=>j.cups>=t+1?(0,l.jsx)(r.JO,{w:"50px",h:"50px",color:"blue.700",as:i.q8U},t):(0,l.jsx)(r.JO,{className:h&&j.cups===t?"active":"",w:"50px",h:"50px",color:"gray.200",as:i.q8U},t))}),(0,l.jsx)(c.Z,{display:n,onReset:function(){b(v),S()},onSubmit:function(){let e=j;e.cups>14&&(e.cups=14),(0,u.sd)(e,t,w),S()},submitButton:f})]})}var h=n(8428),p=n(2496);let f={submitActive:!1,submitLoading:!1,loadingText:"جاري تحديث البيانات"},g=[{value:"sleepy",label:"نعاس"},{value:"moody",label:"متقلب"},{value:"happy",label:"سعيد"},{value:"tired",label:"متعب"},{value:"ignore",label:"لا مبالي"},{value:"clear",label:"صافي"},{value:"active",label:"نشيط"}],j=[{value:"headache",label:"صداع"},{value:"bloating",label:"انتفاخ المعدة"},{value:"stomach",label:"الم المعدة"},{value:"thirsty",label:"عطش"},{value:"disgust",label:"شعور غثيان"},{value:"smell",label:"رائحة فم كريهة"},{value:"constipation",label:"امساك المعدة"}],b={mood:"",symptoms:""};function v(e){let{user:t}=e,[n,r]=(0,s.useState)(b),[o,i]=(0,s.useState)(b),[d,x]=(0,s.useState)("none"),[m,v]=(0,s.useState)(f),[w,S]=(0,s.useState)(!1);function C(){x("none"),v(f)}function y(e,t){r({...n,[e]:t}),v({...m,submitActive:!0}),x("flex")}return(0,p.r)(w?{url:"/users/status/".concat(t._id),method:"post",data:{symptoms:n.symptoms,mood:n.mood,user:t._id,date:new Date().toLocaleDateString("en")},successToast:"تم تحديث البيانات بنجاح"}:null,r,{onRequest:()=>S(!1),onSuccess(e){C(),i(e)}}),(0,s.useEffect)(()=>{let e={current:!0};return(0,u.lR)(null==t?void 0:t._id,r,e,i),()=>{e.current=!1}},[]),(0,l.jsxs)(a.kC,{bg:"orange.100",flexDir:"column",color:"orange.800",layerStyle:"flexCenter",gap:"3",p:"2",children:[(0,l.jsx)(a.xv,{fontSize:{base:"lg",md:"3xl"},fontWeight:"bold",children:"حالتك المزاجية"}),(0,l.jsx)(a.xv,{fontSize:{base:"md",md:"lg"},children:"نود معرفة حالتك المزاجية لهذا اليوم (اختياري)"}),(0,l.jsxs)(a.kC,{w:"100%",flexDir:"column",children:[(0,l.jsx)(a.xv,{px:"4",fontSize:{base:"md",md:"xl"},fontWeight:"bold",children:"مزاجك لهذا اليوم"}),(0,l.jsx)(a.kC,{w:"100%",gap:"1",my:"3",wrap:"wrap",children:g.map(e=>(0,l.jsxs)(a.kC,{gap:"2",align:"center",flexDir:"column",w:"90px",cursor:"pointer",children:[(0,l.jsx)(h.Ee,{cursor:"pointer",src:"/home/status/"+e.value+".svg",alt:e.value,w:"50px",onClick:()=>y("mood",e.value),borderRadius:n.mood===e.value?"20%":"initial",transform:n.mood===e.value?"scale(1.2)":"none",bg:n.mood===e.value?"yellow.600":"transparent",_hover:{transform:"scale(1.2)",transition:"all .2s ease-in-out",bg:"yellow.600",borderRadius:"20%"}}),(0,l.jsx)(a.xv,{textAlign:"center",fontSize:{base:"md",md:"lg"},children:e.label})]},e.value))})]}),(0,l.jsxs)(a.kC,{w:"100%",gap:"1",flexDir:"column",children:[(0,l.jsx)(a.xv,{fontSize:{base:"md",md:"xl"},fontWeight:"bold",children:"الأعراض لهذا اليوم"}),(0,l.jsx)(a.kC,{w:"100%",gap:"1",my:"3",wrap:"wrap",children:j.map(e=>(0,l.jsxs)(a.kC,{gap:"2",align:"center",flexDir:"column",w:"89px",children:[(0,l.jsx)(h.Ee,{cursor:"pointer",src:"/home/status/"+e.value+".svg",alt:e.value,w:"50px",onClick:()=>y("symptoms",e.value),borderRadius:n.symptoms===e.value?"20%":"initial",transform:n.symptoms===e.value?"scale(1.2)":"none",bg:n.symptoms===e.value?"yellow.600":"transparent",_hover:{transform:"scale(1.2)",transition:"all .2s ease-in-out",bg:"yellow.600",borderRadius:"20%"}}),(0,l.jsx)(a.xv,{textAlign:"center",fontSize:{base:"md",md:"lg"},children:e.label})]},e.value))})]}),(0,l.jsx)(c.Z,{display:d,onReset:function(){r(o),C()},onSubmit:function(){v({...m,submitLoading:!0}),S(!0)},submitButton:m})]})}var w=n(2547),S=n(5054),C=n(830),y=n(155),k=n(252),z=n(6107);function D(){return{carbs:0,fats:0,proteins:0,calories:0}}function E(e){let{setFetchCalories:t}=e,n=(0,o.oR)(e=>e.user),{isOpen:r,onOpen:i,onClose:c}=(0,w.qY)(),[u,d]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(D);function f(e,t){m(!0),p({...h,[e]:+t})}async function g(){d(!0),await (0,z._)({url:"/users/addcustommeal/".concat(n._id),method:"post",data:{...h,date:new Date().toLocaleDateString("en")},successToast:"تم الاضافة بنجاح "}),d(!1),p(D()),t(!0),c()}return(0,l.jsxs)(a.kC,{w:"100%",mt:"-3",mb:"2",children:[(0,l.jsx)(S.zx,{colorScheme:"orange",w:"60vw",leftIcon:(0,l.jsx)(y.ATl,{fontSize:"30px"}),mx:"auto",onClick:i,children:"اضف وجبتك الخاصه"}),(0,l.jsxs)(C.u_,{isOpen:r,onClose:c,children:[(0,l.jsx)(C.ZA,{}),(0,l.jsxs)(C.hz,{children:[(0,l.jsx)(C.xB,{children:" وجبتك الخاصه "}),(0,l.jsx)(C.ol,{}),(0,l.jsxs)(C.fe,{children:[(0,l.jsx)(k.J,{type:"number",label:"السعرات الحرارية",name:"calories",value:h.calories,onChange:f,readOnly:u}),(0,l.jsx)(k.J,{type:"number",label:"الكربوهيدرات ",name:"carbs",value:h.carbs,onChange:f,readOnly:u}),(0,l.jsx)(k.J,{type:"number",label:"البروتينات ",name:"proteins",value:h.proteins,onChange:f,readOnly:u}),(0,l.jsx)(k.J,{type:"number",label:"الدهون ",name:"fats",value:h.fats,onChange:f,readOnly:u})]}),(0,l.jsxs)(C.mz,{children:[(0,l.jsx)(S.zx,{ml:"3",onClick:c,children:"الغاء"}),(0,l.jsx)(S.zx,{disabled:!x,onClick:g,colorScheme:"green",children:"اضافه"})]})]})]})]})}var O=n(1649),_=n(8584),R=n(6373);function W(e){let{loading:t,docsCount:n,data:s,action:r}=e;return t?(0,l.jsx)(a.kC,{w:"100%",align:"center",justify:"space-around",gap:"2",children:Array(n).fill(0).map((e,t)=>(0,l.jsx)(_.Od,{borderRadius:"xl",w:"190px",h:"250px"},t))}):(0,l.jsx)(a.kC,{align:"center",justify:"space-around",w:"100%",gap:"1",children:s.map((e,t)=>(0,l.jsx)(R.E,{className:"next"===r?"nextAnimation":"prev"===r?"prevAnimation":"",meal:e},t))})}function A(e,t,n){let l=Math.floor((e-60)/190);return t&&t(l),n&&n({start:0,end:l}),l}function N(e){let{link:t,label:n}=e,[o,i]=(0,s.useState)(A(window.innerWidth)),[c,u]=(0,s.useState)({current:1,docsNumbers:0}),[d,x]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0),[f,g]=(0,s.useState)({start:0,end:0}),[j,b]=(0,s.useState)(""),[v,w]=(0,s.useState)(!0);(0,p.r)(v?{url:t+c.current,noErrorToast:!0}:null,null,{onRequest:()=>w(!1),onSuccess(e){let t=e.meals;x(d.concat(t)),u({...c,docsNumbers:e.count}),A(window.innerWidth,i,1===c.current?g:null),c.current>1&&g({start:f.start+o,end:f.end+o}),h(!1)}});let S=()=>{h(!0),i(A(window.innerWidth,i,g)),h(!1)};return(0,s.useEffect)(()=>(window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)}),[]),(0,l.jsxs)(a.kC,{w:"100%",overflow:"hidden",flexDir:"column",my:"4",gap:"2",children:[(0,l.jsx)(a.xv,{px:"4",fontSize:{base:"md",md:"xl"},fontWeight:"bold",children:n}),(0,l.jsxs)(a.kC,{justify:"space-between",bg:"orange.50",borderRadius:"xl",align:"center",py:"10px",h:"270px",w:"100%",children:[(0,l.jsx)(r.JO,{as:O.hjJ,onClick:function(){if(!m&&c.docsNumbers&&d.length&&!(f.end>=c.docsNumbers)){if(f.end<d.length&&(f.end+o<=d.length||d.length===c.docsNumbers))g({start:f.start+o,end:f.end+o});else{h(!0);let e=c.current+1;u({...c,current:e}),w(!0)}b("next"),setTimeout(()=>{b("")},300)}},cursor:"pointer",w:"30px",h:"30px",color:!m&&c.docsNumbers&&(f.end<d.length||d.length<c.docsNumbers)?"orange.500":"orange.100"}),(0,l.jsx)(W,{action:j,loading:m,docsCount:o,data:d.slice(f.start,f.end)}),(0,l.jsx)(r.JO,{as:O.u1R,onClick:function(){!m&&c.docsNumbers&&0!==f.start&&(g({start:f.start-o,end:f.start}),b("prev"),setTimeout(()=>{b("")},300))},w:"30px",h:"30px",cursor:"pointer",color:!m&&c.docsNumbers&&f.start>0?"orange.500":"orange.200"})]})]})}function F(){return(0,l.jsxs)(a.kC,{py:"1",bg:"orange.100",align:"center",flexDir:"column",children:[(0,l.jsx)(a.xv,{color:"orange.800",fontSize:{base:"lg",md:"3xl"},fontWeight:"bold",children:"قم باختيار الوجبة اللتي ستاكلها"}),(0,l.jsx)(N,{link:"/meals/query?time=breakfast&page=",label:"وجبات الافطار"}),(0,l.jsx)(N,{link:"/meals/query?time=lunch&page=",label:"وجبات الغداء"}),(0,l.jsx)(N,{link:"/meals/query?time=snack&page=",label:"وجبات الخفيفة"}),(0,l.jsx)(N,{link:"/meals/query?time=dinner&page=",label:"وجبات العشاء"})]})}function T(){return(0,l.jsxs)(a.kC,{w:"100%",flexDir:"column",p:"1",justify:"space-around",align:"center",children:[(0,l.jsx)("div",{className:"half_circle_loader"}),(0,l.jsxs)(a.kC,{w:"100%",mt:"5",justify:"space-around",align:"center",children:[(0,l.jsxs)(a.kC,{w:"45%",flexDir:"column",gap:"5",align:"center",children:[(0,l.jsx)(_.Od,{startColor:"purple.500",height:"5px",width:"100%"}),(0,l.jsx)(_.Od,{startColor:"red.500",height:"5px",width:"100%"}),(0,l.jsx)(_.Od,{startColor:"green.500",height:"5px",width:"100%"})]}),(0,l.jsxs)(a.kC,{w:"45%",flexDir:"column",gap:"5",align:"center",children:[(0,l.jsx)(_.Od,{height:"5px",width:"100%"}),(0,l.jsx)(_.Od,{height:"5px",width:"100%"}),(0,l.jsx)(_.Od,{height:"5px",width:"100%"}),(0,l.jsx)(_.Od,{height:"5px",width:"100%"})]})]})]})}var q=n(8152);function L(e){let{label:t,energy:n,colorScheme:s,value:r}=e;return(0,l.jsxs)(a.kC,{color:"orange.800",flexDir:"column",gap:"2",children:[(0,l.jsxs)(a.xv,{fontSize:"lg",fontWeight:"bold",children:[" ","احتياجك من ",t+" ".concat(n.total," جم")," "]}),(0,l.jsx)(q.Ex,{hasStripe:!0,isAnimated:!0,colorScheme:s,size:"xs",mx:"2",value:r,bg:s+".100"}),(0,l.jsx)(a.xv,{fontSize:"xs",children:n.total-n.actual<0?"لقد استهلكت اكثر من اللازم  (".concat(n.actual,") جم"):"استهلكت ".concat(n.actual," متبقي لك ").concat(n.total-n.actual," غم")})]})}var B=n(770);function J(e){let{data:t}=e;return(0,l.jsx)(a.kC,{w:"100%",flexDir:"column",gap:"3",align:"center",children:Object.keys(t).map((e,n)=>(0,l.jsxs)(a.kC,{w:"100%",align:"center",justify:"space-around",children:[(0,l.jsxs)(a.xv,{pt:"2",color:"orange.800",fontSize:{base:"sm",md:"md"},fontWeight:"bold",children:["وجبات ",(0,B.Fw)(e)]}),(0,l.jsx)(a.kC,{align:"center",py:"2",px:"3",mt:"2",bg:"white",borderRadius:"xl",justify:"space-around",w:"75%",children:(function(e){let t={label:"الكربوهيدرات",colorScheme:"purple",value:e.reduce((e,t)=>e+ +t.carbs,0)},n={label:"البروتينات",colorScheme:"red",value:e.reduce((e,t)=>e+ +t.proteins,0)},l={label:"الدهون",colorScheme:"green",value:e.reduce((e,t)=>e+ +t.fats,0)};return[t,n,l]})(t[e]).map((e,t)=>(0,l.jsxs)(a.Ct,{className:"energyBadge",fontSize:{base:"7px",md:"13px"},colorScheme:e.colorScheme,children:[" ","".concat(e.label," ").concat(e.value," جم")," "]},t))})]},n))})}var Z=n(3957);function I(e){let{isOpen:t,onClose:n,mealsData:s}=e;return(0,l.jsxs)(C.u_,{isOpen:t,size:{base:"full",md:"6xl"},onClose:n,children:[(0,l.jsx)(C.ZA,{}),(0,l.jsxs)(C.hz,{children:[(0,l.jsxs)(C.xB,{textAlign:"center",children:[" ","الوجبات التي تم تناولها اليوم"]}),(0,l.jsx)(C.ol,{}),(0,l.jsx)(C.fe,{children:(0,l.jsxs)(Z.mQ,{isFitted:!0,variant:"soft-rounded",colorScheme:"orange",children:[(0,l.jsxs)(Z.td,{children:[(0,l.jsx)(Z.OK,{children:"وجبات الفطور"}),(0,l.jsx)(Z.OK,{children:"وجبات الغداء"}),(0,l.jsx)(Z.OK,{children:"وجبات العشاء"}),(0,l.jsx)(Z.OK,{children:"وجبات خفيفة"})]}),(0,l.jsxs)(Z.nP,{children:[(0,l.jsx)(Z.x4,{children:(0,l.jsx)(a.kC,{wrap:"wrap",p:"1",gap:"2",children:s.breakfast.map((e,t)=>(0,l.jsx)(R.E,{time:"breakfast",meal:e},t))})}),(0,l.jsx)(Z.x4,{children:(0,l.jsx)(a.kC,{wrap:"wrap",p:"1",gap:"2",children:s.lunch.map((e,t)=>(0,l.jsx)(R.E,{time:"lunch",meal:e},t))})}),(0,l.jsx)(Z.x4,{children:(0,l.jsx)(a.kC,{wrap:"wrap",p:"1",gap:"2",children:s.dinner.map((e,t)=>(0,l.jsx)(R.E,{time:"dinner",meal:e},t))})}),(0,l.jsx)(Z.x4,{children:(0,l.jsx)(a.kC,{wrap:"wrap",p:"1",gap:"2",children:s.snack.map((e,t)=>(0,l.jsx)(R.E,{time:"snack",meal:e},t))})})]})]})}),(0,l.jsx)(C.mz,{children:(0,l.jsx)(S.zx,{colorScheme:"yellow",mr:3,onClick:n,children:"الغاء"})})]})]})}var M=n(8193);function P(){return{total:100,actual:10}}function K(e){let{fetchCalories:t,setFetchCalories:n}=e,i=(0,o.oR)(e=>e.user),[c,u]=(0,s.useState)(!0),[d,x]=(0,s.useState)(P),[m,h]=(0,s.useState)(P),[f,g]=(0,s.useState)(P),[j,b]=(0,s.useState)(P),[v,w]=(0,s.useState)(!0),[C,y]=(0,s.useState)(null),[k,z]=(0,s.useState)(!1),D=()=>z(!0),E=()=>z(!1);return(0,s.useEffect)(()=>{t&&w(!0)},[t]),(0,p.r)(v?{url:"/users/getmeal/".concat(i._id,"?date=").concat(new Date().toLocaleDateString("en"))}:null,null,{onRequest(){n(!1),w(!1)},onSuccess(e){y(e.mealsData);let t=(0,B.v0)(e.mealsData,e.custom);h(e=>({...e,actual:+t.proteins.toFixed(0)})),b(e=>({...e,actual:+t.carbs.toFixed(0)})),g(e=>({...e,actual:+t.fats.toFixed(0)})),x(e=>({...e,actual:+t.calories.toFixed(0)})),u(!1)}}),(0,s.useEffect)(()=>{let e=(0,B.WO)(i.willing,i.physicalActivity,i.measurements);x(t=>({...t,total:+e.calories.toFixed(0)})),h(t=>({...t,total:+e.proteins.toFixed(0)})),g(t=>({...t,total:+e.fats.toFixed(0)})),b(t=>({...t,total:+e.carbs.toFixed(0)}))},[]),(0,s.useEffect)(()=>{let e=document.getElementById("caloriesCanvas"),t=Math.PI/180;if(e){let n=d.actual/d.total*180+180,l=e.getContext("2d");l.beginPath(),l.lineWidth=9,l.strokeStyle="#FBD38D",l.arc(180,120,110,180*t,360*t,!1),l.stroke(),l.beginPath(),l.lineWidth=9,l.lineCap="round",l.strokeStyle="#7B341E",l.arc(180,120,110,180*t,n*t,!1),l.stroke()}},[c,d]),(0,l.jsxs)(a.kC,{w:"100%",flexDir:"column",p:"1",align:"center",children:[(0,l.jsx)(a.xv,{color:"orange.800",fontSize:{base:"lg",lg:"3xl"},fontWeight:"semibold",children:"سعراتك الحرارية لهذا اليوم"}),c&&(0,l.jsx)(T,{}),!c&&(0,l.jsxs)(a.kC,{position:"relative",children:[(0,l.jsx)("canvas",{id:"caloriesCanvas",width:"360",height:"180"}),(0,l.jsxs)(a.kC,{color:"orange.800",flexDir:"column",position:"absolute",top:"47px",right:"120",align:"center",children:[(0,l.jsx)(r.JO,{w:"8",h:"8",mb:"2",as:M.o$9}),(0,l.jsxs)(a.xv,{fontWeight:"bold",children:[" استهلكت ",d.actual," سعره"]}),(0,l.jsx)(a.xv,{children:d.total-d.actual<0?"استهلكت اكثر من اللازم":" متبقي لك ".concat(d.total-d.actual," سعره")})]})]}),!c&&(0,l.jsxs)(a.kC,{w:"100%",gap:"10",align:"center",flexDir:{base:"column",lg:"row"},children:[(0,l.jsxs)(a.kC,{w:{base:"100%",lg:"48%"},gap:"3",flexDir:"column",children:[(0,l.jsx)(L,{energy:j,label:"الكربوهيدرات",colorScheme:"purple",value:j.actual/j.total*100}),(0,l.jsx)(L,{energy:m,label:"البروتينات",colorScheme:"red",value:m.actual/m.total*100}),(0,l.jsx)(L,{energy:f,label:"الدهون",colorScheme:"green",value:f.actual/f.total*100})]}),(0,l.jsxs)(a.kC,{w:{base:"100%",lg:"48%"},bg:"orange.200",flexDir:"column",borderRadius:"xl",p:"1",align:"center",boxShadow:"xl",children:[(0,l.jsxs)(a.kC,{w:"100%",align:"center",p:"1",justify:"space-around",children:[(0,l.jsx)(a.xv,{color:"orange.900",fontSize:{base:"md",md:"xl"},fontWeight:"bold",children:"محتوي اكلك لهذا اليوم"}),(0,l.jsx)(S.zx,{onClick:D,size:{base:"sm",md:"md"},colorScheme:"orange",children:"عرض الوجبات"})]}),C&&(0,l.jsx)(J,{data:C})]}),(0,l.jsx)(I,{onClose:E,isOpen:k,mealsData:C})]})]})}var V=(0,n(3412).Z)(function(e){let{user:t,endDate:n,isSubscriped:r}=e;(0,s.useEffect)(()=>{},[]);let[o,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{window.handleSnap("PAGE_VIEW")},[]),(0,l.jsxs)(l.Fragment,{children:[n&&(0,l.jsxs)(a.xv,{textAlign:"center",fontSize:"xs",children:["تاريخ انتهاء الاشتراك : ",n]}),(0,l.jsxs)(a.kC,{gap:"5",flexDir:"column",children:[(0,l.jsx)(K,{setFetchCalories:i,fetchCalories:o}),(0,l.jsx)(F,{}),(0,l.jsx)(E,{setFetchCalories:i}),(0,l.jsx)(m,{user:t}),(0,l.jsx)(v,{user:t})]})]})},"meal")},3412:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var l=n(5893),a=n(1163),s=n(7294),r=n(4781),o=n(331),i=n(5110),c=n(5832);function u(e,t){let n=()=>{let n=(0,a.useRouter)(),[u,d]=(0,s.useState)(!0),[x,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(""),j=(0,o.oR)(e=>e.user),b=(0,o.oR)(e=>e.prices);return(0,s.useEffect)(()=>{if(j&&(null==b?void 0:b.length)){if("pricing"===t)(0,i.b)(j,"meal").status?n.replace("/"):d(!1);else if("meal"===t){if((0,i.b)(j,"meal").status)m(!0),g((0,i.b)(j,"meal").end),d(!1);else{n.replace("/pricing"),(0,c.Z)("يجب عليك الاشتراك في باقات الكيتو","info");return}}else(0,i.b)(j,t).status?(m(!0),g((0,i.b)(j,t).end)):m(!1),d(!1)}(null==b?void 0:b.length)&&!j&&("pricing"===t?(p(!0),d(!1)):n.replace("/"))},[j,b]),u?(0,l.jsx)(r.Z,{}):(0,l.jsx)(e,{user:j,endDate:f,isSubscriped:x,vistor:h})};return n}},770:function(e,t,n){"use strict";function l(e,t){let n=0,l=0,a=0,s=0;for(let r in e)e[r].map(e=>{n+=e.carbs,l+=e.fats,a+=e.proteins,s+=e.calories});return n+=t.carbs,l+=t.fats,a+=t.proteins,s+=t.calories,{carbs:n,fats:l,proteins:a,calories:s}}function a(e,t,n){var l,a;let s,r,o,i,c;return o=.7*(l=s=(10*n.weight+6.25*n.height-5*n.age+("male"===n.sex?5:-161))*function(e){switch(e){case"sedentary":return 1.2;case"light":return 1.375;case"moderate":return 1.55;case"active":return 1.725}}(t),a=n.sex,c=l,s="male"===a?c-="max"===e?500:250:c-="max"===e?300:150)/9,i=.25*s/4,r=.05*s/4,{calories:s,carbs:r,fats:o,proteins:i}}function s(e){let t="";switch(e){case"breakfast":t="الافطار";break;case"dinner":t="العشاء";break;case"lunch":t="الغداء";break;case"snack":t="خفيفة"}return t}n.d(t,{Fw:function(){return s},G6:function(){return r},WO:function(){return a},v0:function(){return l}});let r=e=>!1},6373:function(e,t,n){"use strict";n.d(t,{E:function(){return u}});var l=n(5893),a=n(8790),s=n(8428),r=n(5054),o=n(7294),i=n(1163),c=n(331);function u(e){let{meal:t,width:n,size:u,className:d,time:x}=e,m=(0,i.useRouter)(),h=(0,c.oR)(e=>e.setMealView),p=(0,c.oR)(e=>e.user),[f,g]=(0,o.useState)(!1);return(0,l.jsxs)(a.kC,{flexDir:"column",p:"1",bg:"orange.100",className:null!=d?d:"",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),rounded:"xl",color:"orange.800",w:"190px",h:"250px",layerStyle:"flexCenter",children:[(0,l.jsx)(s.Ee,{src:t.image.url?t.image.url:"https://res.cloudinary.com/ketoar/image/upload/v1/".concat(t.image),alt:"meal",mb:"3",rounded:"3xl",w:"140px"}),f?(0,l.jsxs)(a.kC,{gap:"1",h:"35%",align:"center",flexDir:"column",children:[((null==p?void 0:p.role)==="admin"||(null==p?void 0:p._id)===t.addedBy)&&(0,l.jsx)(r.zx,{size:{base:"sm",md:"md"},onClick:function(){h(t),m.replace("/admin/addMeal?edit="+t._id)},colorScheme:"yellow",children:"تعديل"}),(0,l.jsx)(r.zx,{size:{base:"sm",md:"md"},colorScheme:"orange",w:"90%",onClick:function(){h(t),m.replace({pathname:"/mealView",query:{time:x||""}},"/mealView")},children:"تحضير الوجبة"})]}):(0,l.jsxs)(a.kC,{align:"center",gap:"1",h:"35%",flexDir:"column",children:[(0,l.jsx)(a.xv,{fontSize:{base:"md",md:"lg"},fontWeight:"bold",children:t.name.slice(0,19)}),(0,l.jsxs)(a.xv,{children:[" ",t.duration," دقائق"]}),(0,l.jsxs)(a.Ct,{colorScheme:"red",variant:"subtle",fontSize:"sm",rounded:"lg",px:"3",children:[t.calories," سعره"]})]})]})}},2496:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var l=n(7294),a=n(6107);function s(e,t,n){let[s,r]=(0,l.useState)(!1),o=(0,l.useRef)(!0);async function i(e,t){let l=await (0,a._)({...e});l&&o.current&&(n&&n.onSuccess&&n.onSuccess(l),t&&t(l),r(!0))}return(0,l.useEffect)(()=>(o.current=!0,e?(i(e,t),n&&n.onRequest&&n.onRequest()):r(!1),()=>{o.current=!1}),[e]),{data:s}}},8873:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var l=n(5893),a=n(8790),s=n(5054);function r(e){let{onReset:t=()=>{},onSubmit:n=()=>{},display:r="none",submitButton:o={submitActive:!1,submitLoading:!1,loadingText:"جاري تحديث البيانات"}}=e;return(0,l.jsxs)(a.kC,{display:r,my:"2",align:"center",w:"100%",justify:"space-around",children:[(0,l.jsx)(s.zx,{w:{base:"120px",md:"200px"},colorScheme:"yellow",onClick:t,children:"الغاء التعديلات"}),(0,l.jsx)(s.zx,{isLoading:o.submitLoading,loadingText:o.loadingText,disabled:!o.submitActive,w:{base:"120px",md:"200px"},colorScheme:"green",onClick:n,children:"حفظ التعديلات"})]})}},252:function(e,t,n){"use strict";n.d(t,{J:function(){return c}});var l=n(5893),a=n(3789),s=n(4612),r=n(8790),o=n(1391),i=n(3441);function c(e){let{type:t,value:n,name:c,label:u,onChange:d,width:x,options:m,readOnly:h=!1}=e;return(0,l.jsxs)(a.NI,{maxW:x||"500px",children:[(0,l.jsx)(a.lX,{htmlFor:c,children:u}),("text"===t||"number"===t||"array"===t)&&(0,l.jsx)(s.II,{color:"orange.500",readOnly:"image"===c||h,id:c,focusBorderColor:"orange.500",type:t,name:c,value:"object"==typeof n?n.join(","):n,onChange:e=>d(c,e.target.value)}),"select"===t&&(0,l.jsx)(r.kC,{sx:{"div > div":{left:"10px",right:"unset"}},children:(0,l.jsx)(o.Ph,{id:c,value:n,onChange:e=>d(c,e.target.value),name:c,placeholder:u,children:null==m?void 0:m.map((e,t)=>(0,l.jsx)("option",{value:e.value,children:e.label},t))})}),"textarea"===t&&(0,l.jsx)(i.g,{color:"orange.500",id:c,focusBorderColor:"orange.500",name:c,value:n,onChange:e=>d(c,e.target.value)})]})}},4781:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var l=n(5893),a=n(8790),s=n(9609);function r(e){let{text:t}=e;return(0,l.jsxs)(a.kC,{p:"3",flex:"1",justifyContent:"center",flexDir:"column",alignItems:"center",children:[(0,l.jsx)(s.$,{transform:"translate(-50%, -50%)",thickness:"7px",speed:"0.65s",w:"8rem",h:"8rem",emptyColor:"orange.200",color:"orange.700"}),t&&(0,l.jsx)(a.xv,{children:t})]})}}},function(e){e.O(0,[260,617,866,957,555,774,888,179],function(){return e(e.s=747)}),_N_E=e.O()}]);